'use strict';mix_d("SBXGwentCards__dare-lifestyle-image-creative-desktop:dare-lifestyle-image-creative-desktop__XLRV9Cql","exports tslib @c/remote-operations @c/dom @c/logger @c/pagemarker @c/aui-utils @c/metrics @c/aui-feature-detect @p/A @c/browser-operations @p/a-ajax @c/aui-modal @c/scoped-dom @c/aui-untrusted-ajax".split(" "),function(Wa,w,Ib,sa,Xa,Ya,Za,M,Jb,Kb,za,Lb,Mb,Nb,Ob){function Q(d){return d&&"object"===typeof d&&"default"in d?d:{"default":d}}function R(d,a){return function(b){b=z(d,
b);return a?a(b):b}}function $a(d,a,b,f){a?(x("Send"+d+"Success"),b&&x("Send"+d+"Success_"+b),f&&x("Send"+d+"Success_"+f)):(x("Send"+d+"Failure"),b&&x("Send"+d+"Failure_"+b),f&&x("Send"+d+"Failure_"+f))}function ab(d){return Array.isArray(d)?d.map(function(a){return w.__assign(w.__assign({},a),{width:0,height:0})}):{url:d.url,width:0,height:0}}function bb(d,a,b){void 0===b&&(b=void 0);d=a.getElement('[data-component="'.concat(d,'"]'),b);return null===d||void 0===d?void 0:d.dataset}function Pb(d,a,
b,f){d.getElements&&d.getElements(a).forEach(function(c){c&&c.addEventListener("click",function(){var e;null===(e=d.metricsManager)||void 0===e?void 0:e.logEvent(f,Aa({},bb(b,d,c)))})})}function Qb(d){d.getElements('[data-mix-operations~="dare-adb--countdown"]').forEach(function(a){var b,f,c,e,h=null===(f=null===(b=a.parentElement)||void 0===b?void 0:b.parentElement)||void 0===f?void 0:f.dataset.timestamp;if(h){var g=null===(e=null===(c=a.parentElement)||void 0===c?void 0:c.parentElement)||void 0===
e?void 0:e.dataset.template;if(g){var m=(new Date(h)).getTime();b=function(){var l,n=(new Date).getTime();n=Math.ceil((m-n)/1E3);if(0>n&&"undefined"!==typeof k)clearInterval(k),n=null===(l=a.parentElement)||void 0===l?void 0:l.parentElement,(null===n||void 0===n?0:n.nextElementSibling)&&n.remove();else{l=[];var p=Math.floor(n/3600%24);0<=p&&l.push(("0"+p).slice(-2));l.push(("0"+Math.floor(n/60%60)).slice(-2));l.push(("0"+Math.floor(n%60)).slice(-2));a.innerText=g.replace(g,l.join(":"))}};b();var k=
setInterval(b,1E3)}else d.log("no template string for automated deal badge countdown","WARN")}else d.log("no timestamp for automated deal badge countdown","WARN")})}function Rb(d){d.getElement&&d.getElements&&(d.getElements('[data-dare~="call-to-action"]').forEach(function(a){var b,f,c,e=d.getElement('[data-dare~="call-to-action--fallback"]',null!==(b=a.parentElement)&&void 0!==b?b:void 0),h=d.getElement(".a-truncate",a)||d.getElement("span[data-dare-max-rows]",a);b=d.getElement(".a-truncate-full",
a)||d.getElement('span[class*="_truncatedText_"]',a);h&&b&&(b.clientHeight>h.clientHeight&&e?(e.style.display="block",null===(f=a.parentElement)||void 0===f?void 0:f.removeChild(a)):(e=d.getElement('[data-dare~="call-to-action--chevron"]',a))&&!b.hasAttribute("data-dare-chevron")&&(a=b.innerText.split(" "),f=a.pop(),e=e.innerHTML,a="<span>".concat(a.join(" ")," </span><span>").concat(null===(c=null!==f&&void 0!==f?f:"")||void 0===c?void 0:c.trim(),"&nbsp;").concat(e,"</span>"),b.innerHTML=a,b.setAttribute("data-dare-chevron",
"true")))}),Pb(d,Sb.CTA,cb.CTA,r.BRAND_CTA_LINK_CLICKED))}function ha(d){return P&&P.AUI_BUILD_DATE?!0:(d.log("AUI P not found","ERROR"),!1)}function db(d,a,b){return Tb(this,void 0,void 0,function(){return Ub(this,function(f){return[2,new Promise(function(c,e){ha(a)||e(Error("unable to wait for af due to lack of P"));P.when(d).execute(function(){b?b().then(function(){return c(d)}).catch(e):c(d)})})]})})}function Vb(d,a){d.getElements('[data-dare="ScrollableCarousel"]').forEach(function(b){try{(null===
a||void 0===a?0:a.createScrollableCarousel)?a.createScrollableCarousel({el:b,strategy:d}):new Wb({el:b,strategy:d})}catch(f){d.log(f instanceof Error?f:"failed to initailize ScrollableCarousel","ERROR")}});d.getElements('[data-dare="InteractiveCarousel"]').forEach(function(b){try{(null===a||void 0===a?0:a.createInteractiveCarousel)?a.createInteractiveCarousel({el:b,strategy:d}):new eb({el:b,strategy:d})}catch(f){d.log(f instanceof Error?f:"failed to initialize InteractiveCarouse","ERROR")}})}function Xb(d,
a){var b=this;ha(d)&&P.when("A").execute(function(f){var c=f.capabilities.mobile;P.when(c?"a-secondary-view":"a-modal").execute(function(e){return ta(b,void 0,void 0,function(){var h,g=this;return ua(this,function(m){h=function(k,l){return ta(g,void 0,void 0,function(){var n,p,t,q,v,u,A,B,C,I;return ua(this,function(G){switch(G.label){case 0:n=k.currentTarget;if(!(n instanceof HTMLElement))return d.log("energy-efficiency-".concat(l," click target not an html element"),"WARN"),[2];if(e.get(n))return[2];
if(n.dataset.dareEeModalContent)try{p=JSON.parse(n.dataset.dareEeModalContent)}catch(da){return da instanceof Error&&d.log(da,"ERROR"),d.log("failed to parse eel payload","ERROR"),[2]}a:{var E=p;if("object"!==typeof E)var J=!1;else{J=0;for(E=[Object.getOwnPropertyDescriptor(E,"closeButtonLabel"),Object.getOwnPropertyDescriptor(E,"ficheImageUrl"),Object.getOwnPropertyDescriptor(E,"ficheTitle"),Object.getOwnPropertyDescriptor(E,"id"),Object.getOwnPropertyDescriptor(E,"labelImageUrl"),Object.getOwnPropertyDescriptor(E,
"labelTitle"),Object.getOwnPropertyDescriptor(E,"modalTitle")];J<E.length;J++){var N=E[J];if("string"!==typeof(null===N||void 0===N?void 0:N.value)){J=!1;break a}}J=!0}}if(!J)return d.log("energy-efficiency-".concat(l," data is invalid: ").concat(n.dataset.content),"WARN"),[2];"fiche"!==l||p.ficheImageUrl&&p.ficheTitle||d.log("energy-efficiency-".concat(l," payload is missing expected fiche data: ").concat(JSON.stringify(p)),"WARN");G.label=1;case 1:return G.trys.push([1,5,,6]),t="fiche"===l?p.ficheTitle:
p.labelTitle,q="fiche"===l?p.ficheImageUrl:p.labelImageUrl,v=d.createElement("img"),v.setAttribute("alt",null!==t&&void 0!==t?t:""),v.setAttribute("src",null!==q&&void 0!==q?q:""),null!==a&&void 0!==a&&a.generateModalContent?[4,a.generateModalContent(va(va({},p),{activeTab:l}))]:[3,3];case 2:return A=G.sent(),[3,4];case 3:A=null,G.label=4;case 4:return u=A,B=e.create(n,{closeButtonLabel:p.closeButtonLabel,header:c?void 0:p.modalTitle,inlineContent:c||!u?v.outerHTML:u.outerHTML,popoverLabel:null!==
(I=c?t:p.modalTitle)&&void 0!==I?I:"",width:c?void 0:"800"}),B.show(),[3,6];case 5:return C=G.sent(),C instanceof Error&&d.log(C,"ERROR"),d.log("failed to create eel popover","ERROR"),[3,6];case 6:return[2]}})})};d.addEventListener("dare-ee--label-click","click",function(k){return ta(g,void 0,void 0,function(){return ua(this,function(l){switch(l.label){case 0:return[4,h(k,"label")];case 1:return l.sent(),[2]}})})});d.addEventListener("dare-ee--fiche-click","click",function(k){return ta(g,void 0,void 0,
function(){return ua(this,function(l){switch(l.label){case 0:return[4,h(k,"fiche")];case 1:return l.sent(),[2]}})})});return[2]})})})})}function Yb(d){function a(c){try{fetch(c,{method:"GET",mode:"no-cors",cache:"no-store"}).catch(function(e){d.log("Network error when invoking AAX Click URL. Error: ".concat(e),"WARN")})}catch(e){d.log("Failed to execute fetch() when invoking AAX Click URL. Error: ".concat(e),"WARN")}}var b=this;if(ha(d)){var f;d.addEventListener("dare-rcc--click","click",function(c){return Zb(b,
void 0,void 0,function(){var e,h,g,m,k;return $b(this,function(l){e=c.currentTarget;e instanceof HTMLElement||d.log("Rufus conversation trigger is not an HTML element","WARN");h=null===e||void 0===e?void 0:e.dataset.query;h||(d.log("Rufus conversation trigger lacks query","ERROR"),h="");g=null===e||void 0===e?void 0:e.dataset.asinid;g||(d.log("Rufus conversation trigger lacks ASIN ID","ERROR"),g="");m=null===e||void 0===e?void 0:e.dataset.aaxclickurl;m&&""!==m||(d.log("Rufus conversation trigger lacks AAX Click URL",
"ERROR"),m="");k=null===e||void 0===e?void 0:e.dataset.percolaterequestid;k||(d.log("Rufus conversation trigger lacks percolateRequestId","ERROR"),k=Math.random().toString(36).substr(2,10));if("undefined"!==typeof f)try{f.dispatchEvent({detail:{action:{actionId:ac.SPARKLE_RELATED_QUESTION,actionType:bc.INVOKE_NILE_BACKEND_API_WITH_ASIN,payload:{qis:cc.NileAdsSparkleRelatedQuestion,searchRequestId:k,triggerRequest:dc.SPARKLE_RELATED_QUESTION,inContextAsin:g,query:h}}},type:ec["savx:deeplinking"]}),
""!==m&&a(m)}catch(n){n instanceof Error&&d.log(n,"ERROR"),d.log("Failed to dispatch Rufus conversation mash event","ERROR")}else d.log("Failed to dispatch event due to missing MASH");return[2]})})});P.when("mash").execute(function(c){f=c})}}function fc(d,a){a=a||{};var b=a.isAutoPlayDisabled,f=void 0===b?!1:b;b=a.clientExecutionMode;var c=void 0===b?void 0:b;b=a.clientInitiatedStartTime;var e=void 0===b?Date.now():b;a=a.metricsOptions;var h=void 0===a?void 0:a;d.getElements('[data-dare="Video"]').forEach(function(g){try{new gc({el:g,
strategy:d,isAutoPlayDisabled:f,clientExecutionMode:c,clientInitiatedStartTime:e,metricsOptions:h})}catch(m){d.log(m instanceof Error?m:"failed to initialize VideoPlayer","ERROR")}})}function hc(d){return ic(this,void 0,void 0,function(){var a,b,f,c,e;return jc(this,function(h){a=d.a;b=d.instantiateCarousel;f=d.strategy;c=f.getElement();a.loadDescendantImagesManually(c);e=function(g){return b?b(g):new fb(g)};Vb(f,{createInteractiveCarousel:e});return[2]})})}function kc(d,a){var b;if(!d.getElement)return{};
d=d.getElement('[data-attributelevel="CAMPAIGN"]');var f=null!==(b=null===d||void 0===d?void 0:d.dataset)&&void 0!==b?b:{};b=f.anonymizedrequestid;d=f.campaignid;var c=f.customerid,e=f.slotname,h=f.marketplaceid;f=f.sessionid;var g={};a===aa["basebe.Clicks.6"]?g={anonymizedRequestId:b,campaignId:d,customerId:c,market:h,slotName:e,sessionId:f}:a===aa["basebe.Impressions.8"]&&(g={anonymizedRequestId:b,campaignId:d,customerId:c,market:h,slotName:e,sessionId:f});return g}function lc(d,a){if(Array.isArray(a)||
"object"!==typeof a)return!1;switch(d){case aa["basebe.Clicks.6"]:return mc(a);case aa["basebe.Impressions.8"]:return nc(a);default:return!1}}function mc(d){return"anonymizedRequestId el index type asin slotName campaignId idType marker lob sessionId customerId".split(" ").every(function(a){var b;a=null===(b=Object.getOwnPropertyDescriptor(d,a))||void 0===b?void 0:b.value;return null===a||["undefined","string"].includes(typeof a)})}function nc(d){var a;if(!["weblabs","aiGenAssetUrls"].every(function(f){var c;
f=null===(c=Object.getOwnPropertyDescriptor(d,f))||void 0===c?void 0:c.value;return null===f||void 0===f||Array.isArray(f)&&f.every(function(e){return"string"===typeof e})}))return!1;var b=null===(a=Object.getOwnPropertyDescriptor(d,"asins"))||void 0===a?void 0:a.value;return null===b||void 0===b||Array.isArray(b)&&b.every(function(f){return Object.entries({id:"string",prime:"boolean",price:"boolean",savings:"boolean",rating:"string",badge:"string"}).every(function(c){var e,h=c[1];c=null===(e=Object.getOwnPropertyDescriptor(f,
c[0]))||void 0===e?void 0:e.value;return null===c||["undefined",h].includes(typeof c)})})?Object.entries({anonymizedRequestId:"string",creativeVariation:"string",creativeType:"string",version:"string",viewport:"string",slotName:"string",campaignId:"string",idType:"string",market:"string",lob:"string",sessionId:"string",customerId:"string",storeBannerUrl:"string",customImageUrl:"string",adWidth:"number",adHeight:"number",viewportWidth:"number",viewportHeight:"number",isAiGen:"boolean"}).every(function(f){var c,
e=f[1];f=null===(c=Object.getOwnPropertyDescriptor(d,f[0]))||void 0===c?void 0:c.value;return null===f||["undefined",e].includes(typeof f)}):!1}function oc(d){var a,b,f=null!==(a=null===d||void 0===d?void 0:d.strategy)&&void 0!==a?a:new Ba;a=null===d||void 0===d?void 0:d.operations;d=null===(b=null===d||void 0===d?void 0:d.options)||void 0===b?void 0:b.videoOptions;try{Qb(f)}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable automated deal badges","ERROR")}try{Rb(f)}catch(k){k instanceof
Error&&f.log(k,"ERROR"),f.log("failed to enable calls to action","ERROR")}try{var c=f.getElements('[data-dare="clamped-text"]');if(c.length&&!("-webkit-line-clamp"in c[0].style||"lineClamp"in c[0].style)){for(b=0;b<c.length;b++){var e=c[b],h=parseInt(e.getAttribute("data-dare-max-rows")||"1"),g=Math.ceil(parseFloat(getComputedStyle(e).lineHeight||"1.3em")),m=h*g;if(!(e.scrollHeight<=m)){for(;e.scrollHeight>m;)e.innerText=e.innerText.slice(0,-1);e.innerText=e.innerText.slice(0,-3);e.innerText+="\u2026"}}f.log("polyfill applied to clamped text",
"WARN")}}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable clamped text","ERROR")}try{Xb(f,{generateModalContent:null===a||void 0===a?void 0:a.generateEnergyEfficiencyModalContent})}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable energy efficiency buttons","ERROR")}try{Yb(f)}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable rufus conversation cue","ERROR")}try{fc(f,d)}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable video player",
"ERROR")}}function pc(d,a){void 0===a&&(a=!0);var b=qc[d];if(!b)throw Error('unable to create logger for schema "'.concat(d,'" due to no valid producer'));return function(f){na["default"].event(f,b,d,{ssd:a})}}function rc(d){return w.__awaiter(this,void 0,void 0,function(){function a(q){return new sc(w.__assign(w.__assign({},q),{campaignId:c,market:e,slot:h,operations:f}))}var b,f,c,e,h,g,m,k,l,n,p,t;return w.__generator(this,function(q){switch(q.label){case 0:return b=null!==(g=d.strategy)&&void 0!==
g?g:new Ba,f=d.operations,c=null!==(k=null===(m=b.getElement("[data-cid]"))||void 0===m?void 0:m.getAttribute("data-cid"))&&void 0!==k?k:void 0,e=null!==(n=null===(l=b.getElement("[data-mrkt]"))||void 0===l?void 0:l.getAttribute("data-mrkt"))&&void 0!==n?n:void 0,h=null!==(t=null===(p=b.getElement("[data-slot]"))||void 0===p?void 0:p.getAttribute("data-slot"))&&void 0!==t?t:void 0,[4,hc({a:V["default"],instantiateCarousel:a,strategy:b})];case 1:return q.sent(),[2]}})})}var F=Q(sa),K=Q(Xa),Ca=Q(Ya),
tc=Q(Za),na=Q(M),uc=Q(Jb),V=Q(Kb),Da=Q(za),vc=Q(Lb),gb=Q(Mb),wa=Q(Nb),wc=Q(Ob),ia=function(d,a){return d.querySelector("[class*="+a+"]")},xc=function(d,a,b){d=JSON.parse(d);d.adCreativeMetaData=a.adCreativeMetaData;d.feedbackFormContainerId=b;return encodeURI(JSON.stringify(d))},yc=function(d,a,b,f,c){return w.__awaiter(void 0,void 0,void 0,function(){var e,h,g,m,k,l,n;return w.__generator(this,function(p){e="adFeedbackModal_"+d;p=(null===(n=ia(a,"ad-feedback-modal-container"))||void 0===n?void 0:
n.className)||"";h="."+a.className+" ."+p.replace(" ",".");m=(g=b().adCreativeMetaData.adCreativeDetails)?g.length:0;k={a11yOpenMessage:c?c:"",width:Math.max(560,132*m+160),a11yCloseButtonMessage:f};try{return l=gb["default"].create(e,h,k),[2,l]}catch(t){throw M.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+t);}})})},Bc=function(d,a,b,f,c,e){var h="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";
var g=ia(F["default"].cardRoot,h);d.on("beforeShow",function(){return w.__awaiter(void 0,void 0,void 0,function(){var m;return w.__generator(this,function(k){switch(k.label){case 0:return m=zc(d,a,b),[4,d.render(function(l){var n="250px",p=b().adCreativeMetaData.adCreativeDetails;p&&2>p.length&&(n="150px");g.style.marginTop=n;l.innerHTML="";n=l.appendChild;p=document.getElementsByTagName("html")[0].dir;var t=F["default"].createElement("div"),q=F["default"].createElement("div");t.innerHTML=c;"rtl"===
p?(t.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),q.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(t.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),q.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
q.appendChild(t);n.call(l,q);n=document.getElementsByTagName("html")[0].dir;p=F["default"].createElement("div");"rtl"===n?p.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):p.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");Ac(g,p,f,m,e);l.appendChild(p)})];case 1:return k.sent(),[2]}})})})},zc=function(d,a,b){b=b();var f=b.adCreativeMetaData.adCreativeDetails;
null===f||void 0===f?void 0:f.sort(function(c,e){return c.adCreativeIndex<e.adCreativeIndex?-1:1});return xc(a,b,d.id)},Ac=function(d,a,b,f,c){a.appendChild(d);"function"==typeof M.uet&&M.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});wc["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===b?"en-US":b}},{pl:f,deviceType:"desktop"}).then(function(e){return w.__awaiter(void 0,
void 0,void 0,function(){var h,g,m;return w.__generator(this,function(k){"function"==typeof M.uet&&M.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});M.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);h=F["default"].createElement("div");h.innerHTML=String(e.responseBody);for(g=0;g<h.children.length;++g)m=h.children[g],"SCRIPT"===m.tagName?Ea("script",m,a):"LINK"===m.tagName?Ea("link",m,a):Ea("div",m,a);a.removeChild(d);return[2]})})}).catch(function(){"function"==
typeof M.uet&&M.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});M.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);a.innerHTML=c});"function"==typeof M.uex&&M.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},Ea=function(d,a,b){var f=F["default"].createElement(d);f.innerHTML=a.innerHTML;a.getAttributeNames().forEach(function(c){f.setAttribute(c,a.getAttribute(c)||"")});b.appendChild(f)},hb={},Cc=function(d,a){return w.__awaiter(void 0,
void 0,void 0,function(){var b,f,c,e,h,g,m,k,l,n,p;return w.__generator(this,function(t){b=ia(d,"ad-feedback-primary-link");f=a().adFeedbackLabelId;c=Da["default"].setup();e="open-modal"+f;h=a().adCreativeMetaData.adCreativeDetails;g=d.dataset;m=g.isDsaEnabled;k=g.weblabTreatment;l=g.closeButtonAriaText;n=g.adFeedbackTitle;p=String(m);"undefined"===p&&(p=h&&0<h.length?h[0].selectionSignals?"true":"false":"false");"true"===p&&"T1"!==k&&(p="false");c.attach(e,b);c.define(e,"click",function(){return w.__awaiter(void 0,
void 0,void 0,function(){var q;return w.__generator(this,function(v){switch(v.label){case 0:return(q=hb[f])?[3,2]:[4,yc(f,d,a,l,n)];case 1:q=v.sent();var u=d.dataset,A=u.formHeaderText,B=u.dsaFormHeaderText;Bc(q,u.adFeedbackPayload,a,u.currentLocale,"true"===p?B:A,u.formLoadErrorText);hb[f]=q;v.label=2;case 2:return q.show(),[2]}})})});try{b.addEventListener("keydown",function(q){if(" "===q.key||"Enter"===q.key)q.preventDefault(),b.click()})}catch(q){console.log("Couldnt add keydown event listner")}return[2]})})},
Dc=function(d,a){var b=Da["default"].setup(),f="mouse-enter"+a;a="mouse-leave"+a;var c=ia(d,"ad-feedback-primary-link"),e=ia(d,"ad-feedback-text-desktop"),h=ia(d,"ad-feedback-sprite");b.attach(f,c);b.define(f,"mouseenter",function(){h.style.backgroundPosition="0px -12px";e.style.color="#111111"});b.attach(a,c);b.define(a,"mouseleave",function(){h.style.backgroundPosition="0px 0px";e.style.color="#555"})},Ec=function(d){return w.__awaiter(void 0,void 0,void 0,function(){var a,b,f,c;return w.__generator(this,
function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),a=d(),b=wa["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+a.adFeedbackLabelId)[0],f=b.dataset.isSponsoredLabelActive,"false"===(f||"false").toLowerCase()?[2]:[4,Dc(b,a.adFeedbackLabelId)];case 1:return e.sent(),[4,Cc(b,d)];case 2:return e.sent(),[3,4];case 3:throw c=e.sent(),M.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+c);case 4:return[2]}})})},
S,oa;(function(d){d.Cornerstone="CSTONE";d.Axiom="AXIOM"})(oa||(oa={}));var Fc=(S={},S.e="basebe.ClientErrors.5",S.i="basebe.Impressions.8",S.c="basebe.Clicks.6",S.s="basebe.Swipes.6",S.v="basebe.Viewabilities.6",S.vc="basebe.VisualCompleteness.8",S.ss="basebe.slideshow.2",S.ia="basebe.ImpressionsV2.4",S.iv2="basebe.ImpressionsV3.2",S),Fa=function(d,a){return"matches"in d?d.matches(a):"msMatchesSelector"in d?d.msMatchesSelector(a):"webkitMatchesSelector"in d?d.webkitMatchesSelector(a):0<=D(a,y().ownerDocument.body).indexOf(d)},
y=function(d,a){a=a||F["default"].cardRoot;return!d||Fa(a,d)?a:a.querySelector(d)},D=function(d,a){return Array.prototype.slice.call((a||F["default"].cardRoot).querySelectorAll(d))},z=function(d,a){return(a=y("["+d+"]",a))?a.getAttribute(d):null},ib=function(d,a){a:{for(var b="["+d+"]";a&&a!==F["default"].cardRoot;){if(Fa(a,b))break a;a=a.parentElement}a=null}return a?a.getAttribute(d):null},jb=function(d){if(d)return d=d.getBoundingClientRect(),{left:d.left,right:d.right,top:d.top,bottom:d.bottom};
d=T();return{left:0,top:0,right:d.innerWidth,bottom:d.innerHeight}},T=function(){return y().ownerDocument.defaultView},kb=function(d,a){var b=T(),f,c=function(){f||(f=b.setTimeout(d,a))};c.cancel=function(){b.clearTimeout(f);f=0};return c},xa=function(d,a,b){var f=(b||{}).ms||25,c=(b||{}).el||T(),e=tc["default"].throttle(a,f);c.addEventListener(d,e);return function(){c.removeEventListener(d,e)}},Gc=function(d,a,b){void 0===a&&(a=300);void 0===b&&(b=!1);var f;return function(){for(var c=this,e=[],
h=0;h<arguments.length;h++)e[h]=arguments[h];void 0===f&&b&&d.apply(this,e);clearTimeout(f);return f=setTimeout(function(){return d.apply(c,e)},a)}},Hc=function(d){if(d){var a=y().ownerDocument.createElement("div"),b=y().ownerDocument.createElement("button"),f=!1,c=0,e=0;a.append(b);a.setAttribute("style","height: 24px; position: relative; z-index: 11; display: flex; align-items: center; background-color: #fefefe; box-sizing: border-box; pointer-events: all;");b.classList.add("scroll-bar");b.setAttribute("style",
"height: 12px; background-color: rgba(50, 50, 50, 0.75); border-radius: 6px; border: none; position: absolute; top: 50%; transform: translateY(-50%);");b.setAttribute("role","scrollbar");b.setAttribute("aria-orientation","horizontal");b.setAttribute("aria-valuemin","0");b.setAttribute("aria-valuemax","100");b.setAttribute("aria-valuenow","0");var h=function(){a.remove();d.scrollWidth<=d.offsetWidth||(d.after(a),b.style.width=a.offsetWidth/d.scrollWidth*a.offsetWidth+"px")},g=function(l){var n=l.carouselPosition,
p=l.percent;b.style.left=l.scrollPosition||"0px";d.scrollLeft=n||0;b.setAttribute("aria-valuenow",p||"0");m()},m=function(){b.offsetLeft+b.offsetWidth>a.offsetWidth&&(b.style.left=a.offsetWidth-b.offsetWidth+"px",b.setAttribute("aria-valuenow","100"));0>b.offsetLeft&&(b.style.left="0px",b.setAttribute("aria-valuenow","0"))};a.addEventListener("mousedown",function(l){var n;if(l){l.preventDefault();var p=null===l||void 0===l?void 0:l.target;if(null===(n=null===p||void 0===p?void 0:p.classList)||void 0===
n?0:n.contains("scroll-bar"))f=!0;c=b.offsetLeft;e=l.clientX}});a.addEventListener("mousemove",function(l){if(l&&(l.preventDefault(),f&&0<=b.offsetLeft+(c+l.clientX-e)&&b.offsetLeft<=a.offsetWidth-b.offsetWidth)){var n=b.offsetLeft/(a.offsetWidth-b.offsetWidth);g({scrollPosition:c+(l.clientX-e)+"px",carouselPosition:""+(d.scrollWidth-d.offsetWidth)*n,percent:""+Math.round(100*n)})}});a.addEventListener("mouseup",function(l){if(l){l.preventDefault();var n=a.getBoundingClientRect();if(5>=Math.abs(e-
l.clientX)){var p=b.offsetLeft/(a.offsetWidth-b.offsetWidth);g({scrollPosition:l.clientX-n.left-b.offsetWidth/2+"px",carouselPosition:""+(d.scrollWidth-d.offsetWidth)*p,percent:""+Math.round(100*p)})}f=!1}});a.addEventListener("mouseleave",function(){f=!1;m()});b.addEventListener("keydown",function(l){var n=Math.max(5,Math.floor(.05*a.offsetWidth));if("ArrowRight"===l.key||"ArrowDown"===l.key)l.preventDefault(),l=Math.min(b.offsetLeft+n,a.offsetWidth-b.offsetWidth),n=l/(a.offsetWidth-b.offsetWidth),
g({scrollPosition:l+"px",carouselPosition:""+(d.scrollWidth-d.offsetWidth)*n,percent:""+Math.round(100*n)});else if("ArrowLeft"===l.key||"ArrowUp"===l.key)l.preventDefault(),l=Math.max(b.offsetLeft-n,0),n=l/(a.offsetWidth-b.offsetWidth),g({scrollPosition:l+"px",carouselPosition:""+(d.scrollWidth-d.offsetWidth)*n,percent:""+Math.round(100*n)})});var k=Gc(h,33);T().addEventListener("resize",function(){k()});h()}},Ga=function(d,a,b){K["default"].log(d,a,b||"SBX_GWENT")},W=function(d,a){Ga(d,"ERROR",
a)},lb=function(d){var a;d=/\?([^#]+)/.exec(d);if(!d)return[];d=d[1].split("&");var b=null;try{for(var f=w.__values(d),c=f.next();!c.done;c=f.next()){var e=c.value;if(0===e.indexOf("ref_=")){b=e;break}}}catch(g){var h={error:g}}finally{try{c&&!c.done&&(a=f.return)&&a.call(f)}finally{if(h)throw h.error;}}return b?(h=b.split("=").pop()||"")?h.split("_"):[]:[]},mb=function(d,a,b){var f={};if(5<b.length){f.el=b.pop()||null;a:{var c;try{for(var e=w.__values(b),h=e.next();!h.done;h=e.next()){var g=h.value;
if(/^\d+$/.test(g)){var m=g;break a}}}catch(l){var k={error:l}}finally{try{h&&!h.done&&(c=e.return)&&c.call(e)}finally{if(k)throw k.error;}}m=null}f.index=m;f.asin=ib("data-asin",a);f.type=ib("data-avar",a)}d.c(f,a)},Ic=function(d,a){var b=lb(a.href);mb(d,a,b)},Jc=function(d,a){var b=T(),f=function(c){2!==c.button&&(Ic(d,a),c.metaKey||c.altKey||c.shiftKey||c.ctrlKey||1===c.button||"_blank"===a.target||(c.preventDefault(),b.setTimeout(function(){b.open(a.href,a.target||"_top")},50)))};a.addEventListener("click",
f);a.addEventListener("auxclick",f)},nb=function(d,a,b){var f=y("[data-active]"),c=(null===f||void 0===f?void 0:f.dataset)||{};f=c.paginationId;c=c.index;a.c({el:"sb-slideshow-arrow",type:d,asin:void 0===f?null:f,index:void 0===c?null:c},b)},Lc=function(d,a){D("[href]",a).filter(function(b){return!b.classList.contains("a-carousel-button")}).forEach(function(b){Jc(d,b)});D('[data-mix-operations="dare-rcc--click"]',a).forEach(function(b){b.addEventListener("click",function(){return d.c({el:"rufus-conversation-cue"},
a)})});D(".amazon-follow",a).forEach(function(b){b.addEventListener("click",function(){var f=lb("?&ref_="+b.getAttribute("data-ref"));mb(d,b,f)})});D('[data-mix-operations="handleNext"]').forEach(function(b){b.addEventListener("click",function(){nb("next",d,a)})});D('[data-mix-operations="handlePrev"]').forEach(function(b){b.addEventListener("click",function(){nb("prev",d,a)})});D('[data-mix-operations="handlePaginationClick"]').forEach(function(b){b.addEventListener("click",function(){var f=b.dataset||
{},c=f.paginationId;f=f.index;d.c({el:"sb-slideshow-pagination",type:"pagination",index:void 0===f?null:f,asin:void 0===c?null:c},a)})});D('[data-mix-operations="hotSpotClick"]').forEach(function(b){b.addEventListener("click",function(){var f,c=(b.dataset||{}).asinid;c=void 0===c?null:c;var e=b.style,h=e.left;e=e.top;var g=y('[data-asin="'+c+'"]')||void 0;g=((null===(f=y("[data-asinindex]",g))||void 0===f?void 0:f.dataset)||{}).asinindex;f=void 0===g?null:g;h={x:parseFloat(h),y:parseFloat(e)};h=JSON.stringify(h);
c=w.__assign({type:h},{asin:c,el:"hotspot",index:f});d.c(c,b)})});Kc(d)},Kc=function(d){var a=y('[class*="seeProducts"]'),b=y('[data-mix-operations="expandHandler"]'),f=D('[class*="sidebarButton"]'),c=[a,b].concat(f);if(c.length){var e=[];c.forEach(function(g){if(g){var m=g instanceof HTMLButtonElement&&!z("data-index",g)?"seeProducts":g instanceof HTMLButtonElement?"asinSidebar":"shoppableImageCollapsed",k={asin:g.dataset.asinid||null,index:g.dataset.index||null,el:m};m=function(){if(g){var l=w.__assign({type:"collapsed"},
k);d.c(l,g);h(c,e)}};e.push(m);g.addEventListener("click",m)}});var h=function(g,m){g.forEach(function(k,l){k&&k.removeEventListener("click",m[l])})}}},Ha=R("data-card-metrics-id",function(d){return(d||"").split("_")[0]}),Ia=R("data-var",function(d){y('[data-mix-operations="dare-rcc--click"]')&&(d=(d||"")+"-rufusConversationCue");return d}),Mc=R("data-rid"),Nc=R("data-cid"),Oc=R("data-iid"),ob=R("data-aid"),pb=R("data-aidx"),Pc=R("data-idt",function(d){switch(d){case oa.Axiom:return oa.Axiom;default:return oa.Cornerstone}}),
ya=R("data-rctx",function(d){return d?JSON.parse(d):{sid:"",cid:"",mid:"",aigen:null}}),Ja=R("data-wl",function(d){return d?d.split(","):[]}),Qc=R("data-slot"),Ka=R("data-ts"),La=function(){var d=T();return d.innerWidth+"x"+d.innerHeight},Ma=function(d){return(d=d||F["default"].cardRoot)?(d=d.getBoundingClientRect(),{width:d.width,height:d.height}):{width:0,height:0}},ja=function(d,a){var b;a=a||F["default"].cardRoot;return(d=null===(b=a.querySelector('[class*="'+d+'"]'))||void 0===b?void 0:b.getAttribute("src"))?
d:null},Na=function(d){return{id:z("data-asin",d),prime:!!y(".a-icon-prime",d),price:!!y(".a-price",d),savings:!!y('.a-price[data-a-strike="true"]',d),rating:z("data-rt",d),badge:z("data-deal",d)}},pa=0,Oa=0,qb=!1,X=window.P,rb=V["default"].capabilities&&V["default"].capabilities.isAmazonApp,Rc=function(){return X?new Promise(function(d){X.when("mash").execute("sb-viewability",function(a){var b,f;null!==(f=null===(b=a.appCX)||void 0===b?void 0:b.uiOrchestrator)&&void 0!==f&&f.getObstructions?a.appCX.uiOrchestrator.getObstructions({successCallback:function(){x("NewMashApiAvailable");
d(!0)},failCallback:function(){x("NewMashApiNotAvailable");d(!1)}}):(x("NewMashApiNotAvailable"),d(!1))})}):(x("NewMashApiNotAvailable"),Promise.resolve(!1))},Sc=function(d){return rb&&"T1"===z("data-vcpmfullnativetreatment",d)?Rc().then(function(a){return a}):Promise.resolve(!1)},ka={},Qa=function(d,a,b){void 0===b&&(b=!1);var f=d.getBoundingClientRect(),c=f.width*f.height,e=z("data-viewpixel",d);if(c){f=c=Tc(f,c)/c;var h=z("data-vcpmtreatment",d)||"C";if(.5<=f&&"T1"===h){var g,m,k,l=d.getBoundingClientRect(),
n=z("data-device",d)||"";h=0;var p=Math.max(0,l.left),t=Math.min(window.innerWidth,l.right),q=Math.max(0,l.top);l=Math.min(window.innerHeight,l.bottom);var v=Math.max(0,t-p);var u=Math.max(0,l-q);if(0===v||0===u)d=0;else{var A=w.__read([Math.ceil(u/("mobile"===n?20:30)),Math.ceil(v/("mobile"===n?30:50))],2);n=A[0];A=A[1];for(var B=[],C=0;C<n;C++)for(var I=0;I<A;I++){var G=p+v*I/A,E=q+u*C/n;G>=p&&G<=t&&E>=q&&E<=l&&B.push([G,E])}try{for(var J=w.__values(B),N=J.next();!N.done;N=J.next()){var da=w.__read(N.value,
2);G=da[0];E=da[1];var la=y().ownerDocument.elementsFromPoint(G,E);try{for(var Y=(m=void 0,w.__values(la)),H=Y.next();!H.done;H=Y.next()){var ea=H.value;if(ea instanceof HTMLElement){if(ea===d||d.contains(ea))break;if(ea!==document.body&&"HTML"!==ea.tagName){var Z=window.getComputedStyle(ea);if(!("none"===Z.display||"hidden"===Z.visibility||"0"===Z.opacity||"none"===Z.pointerEvents||.7>parseFloat(Z.opacity))){var ma=Z.backgroundColor;if("transparent"!==ma&&"rgba(0, 0, 0, 0)"!==ma&&""!==ma||Z.backgroundImage.includes("url")){h++;
break}}}}}}catch(Pa){m={error:Pa}}finally{try{H&&!H.done&&(k=Y.return)&&k.call(Y)}finally{if(m)throw m.error;}}}}catch(Pa){var L={error:Pa}}finally{try{N&&!N.done&&(g=J.return)&&g.call(J)}finally{if(L)throw L.error;}}d=0===B.length?0:1-h/B.length}.5<=f&&(.5>c*d?x("LossOfImpresionFromObstruction"):x("NoLossOfImpressionFromObstruction"));f=c*d}.5<=f?x("PercentageInViewPortAbove50"):x("PercentageInViewPortBelow50");if(b)if(.5<=f)if(a)a();else return!0;else if(a)a.cancel();else return!0;else if(e)if(ka[e]||
(ka[e]={percentageViewed:.5,startTimeInView:0}),b=ka[e],b.percentageViewed=f,.5<=f){if(0===b.startTimeInView||1E3<Date.now()-b.startTimeInView)b.startTimeInView=Date.now();if(a)a();else return!0}else if(b.startTimeInView=0,a)a.cancel();else return!0}},Uc=function(){return new Promise(function(d){if(X)try{X.when("MShopChrome").execute("sb-viewability",function(a){a&&"function"===typeof a.getBottomBarsHeight?a.getBottomBarsHeight({successCallback:function(b){x("SuccessToGetBottomBarHeight");"number"===
typeof b.visibleHeight?d(b.visibleHeight):d(0)},failCallback:function(){x("FailureToGetBottomBarHeight");K["default"].log("getBottomBarsHeight failed","ERROR","sbViewability");d(0)}}):(x("GetBottomBarsHeightNotAvailable"),d(0))})}catch(a){K["default"].log("P.when execution failed to get bottom bar height: "+a,"ERROR","sbViewability"),d(0)}else d(0)})},Vc=function(){return new Promise(function(d){if(X)try{X.when("MShopChrome").execute("sb-viewability",function(a){a&&"function"===typeof a.getChromeInfo?
a.getChromeInfo({successCallback:function(b){x("SuccessToGetTopBarHeight");if(b.isTransparentNav){if(screen.orientation&&"landscape-primary"===screen.orientation.type&&"number"===typeof b.landscapeChromeHeight){d(b.landscapeChromeHeight);return}if(screen.orientation&&"portrait-primary"===screen.orientation.type&&"number"===typeof b.portraitChromeHeight){d(b.portraitChromeHeight);return}}d(0)},failCallback:function(){x("FailureToGetTopBarHeight");K["default"].log("getChromeInfo failed","ERROR","sbViewability");
d(0)}}):(x("GetChromeInfoNotAvailable"),d(0))})}catch(a){K["default"].log("P.when execution failed to get top bar height: "+a,"ERROR","sbViewability"),d(0)}else d(0)})},Wc=function(d,a,b){return new Promise(function(f){try{null===X||void 0===X?void 0:X.when("mash").execute("sb-viewability",function(c){var e,h,g;null===(g=null===(h=null===(e=c.appCX)||void 0===e?void 0:e.uiOrchestrator)||void 0===h?void 0:h.getObstructions)||void 0===g?void 0:g.call(h,{successCallback:function(k){sb(k,d,b,a)},failCallback:function(){return K["default"].log("getObstructions failed for new MASH API",
"ERROR","sbViewability")}});var m=function(k){sb(k.detail,d,b,a)};b&&(c.addEventListener("obstructionsChanged",m),f(function(){return c.removeEventListener("obstructionsChanged",m)}))})}catch(c){K["default"].log("P.when execution failed to get full obstruction: "+c,"ERROR","sbViewability"),f(null)}})},sb=function(d,a,b,f){var c,e,h=d.isFullyObstructed;d=d.boundingBoxes;pa=(null===(c=null===d||void 0===d?void 0:d[0])||void 0===c?void 0:c.height)||0;Oa=(null===(e=null===d||void 0===d?void 0:d[1])||
void 0===e?void 0:e.height)||0;qb=h||!1;null===f||void 0===f?void 0:f(a,b)},ub=function(d,a,b,f,c){b=tb(b,f,window.innerWidth);d=tb(d,a,c);return b*d},Tc=function(d,a){var b=d.top,f=d.bottom,c=d.left;d=d.right;var e=T().innerHeight,h=ub(b,f,c,d,Math.max(e,0));if(!X||0>=h)return h;if(qb)return 0;try{a=h/a;var g=ub(b-pa,f-pa,c,d,Math.max(e-Oa-pa,0));.5<=a&&.5>g?x("LossOfImpresionFromNativeObstruction"):x("NoLossOfImpresionFromNativeObstruction");return g}catch(m){return K["default"].log("Error calculating visible area: "+
m,"ERROR","sbViewability"),h}},tb=function(d,a,b){return 0<=d?Math.max(Math.min(b-d,a-d),0):0<a?Math.max(Math.min(Math.min(a,b),a-d),0):0},vb=function(d){var a,b,f=Date.now()-(null===(a=ka[d])||void 0===a?NaN:a.startTimeInView);a=null===(b=ka[d])||void 0===b?void 0:b.percentageViewed;if(f&&a)if(b="/"===d.substr(-1)?d+"v/":d+"/v/",d=JSON.stringify({v:{def:"iab",event:"VIEWED",p:Math.round(100*ka[d].percentageViewed),t:parseFloat((f/1E3).toFixed(3))},programType:"SBC"}),"function"===typeof window.fetch)fetch(b+
encodeURI(d),{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:d}).then(function(e){e.ok||0===e.status||K["default"].log(e.status+" "+e.statusText,"ERROR","sbx-ce-vcpm-fetch");x("PixelClientCallSuccess")}).catch(function(e){x("PixelClientCallFailure");K["default"].log(e,"ERROR","sbx-ce-vcpm-fetch")});else{var c=new XMLHttpRequest;c.open("POST",b+encodeURI(d));c.setRequestHeader("Content-Type","application/json");c.onreadystatechange=function(){4===c.readyState&&(200!==
c.status?K["default"].log(c.status+" "+c.statusText,"ERROR","sbx-ce-vcpm-fetch"):x("PixelClientCallSuccess"))};c.onerror=function(){x("PixelClientCallFailure");K["default"].log("XMLHttpRequest error from old browser","ERROR","sbx-ce-vcpm-fetch")};c.send(d)}else f||x("PixelClientCallMissingTimeInView"),a||x("PixelClientCallMissingPercentageInView")},Xc=function(){return Promise.all([Vc(),Uc()]).then(function(d){d=w.__read(d,2);var a=d[1];pa=d[0];Oa=a}).catch(function(d){K["default"].log("Error calculating top and bottom bar height: "+
d,"ERROR","sbViewability")})},Yc=function(d,a){var b,f=null!==a&&void 0!==a?a:y(),c=null,e=function(){Qa(f,m)},h=void 0;if("mobile-gateway-wd-atf"===(null===f||void 0===f?void 0:f.dataset.slot)){var g=null===(b=y().ownerDocument)||void 0===b?void 0:b.querySelector('div[cel_widget_id="gwm-window-container"]');g&&(h={el:g})}var m=kb(function(){var p=z("data-viewpixel",f);p&&(vb(p),p=y("[data-viewpixel]"),null===p||void 0===p?void 0:p.removeAttribute("data-viewpixel"));k();l();n();c&&c();d.v(null,a)},
1E3);wb(f,m).then(function(p){c=p});var k=xa("scroll",e,h),l=xa("resize",e,h),n=xa("click",e,h);e()},wb=function(d,a){return Sc(d).then(function(b){if(b)return Wc(d,Qa,a);rb&&"T1"===z("data-vcpmnativetreatment",d)&&Xc();return null})},Zc=function(d){if(d)for(var a=function(f){var c=d[f];0===f&&wb(c);f=kb(function(){var e=z("data-viewpixel",c);e&&(vb(e),null===c||void 0===c?void 0:c.removeAttribute("data-viewpixel"))},1E3);Qa(c,f)},b=0;b<d.length;b++)a(b)},xb=function(d,a){var b=null,f=null;d.addEventListener("touchstart",
function(c){b=c.touches[0].pageX});d.addEventListener("touchmove",function(c){null===b&&(b=c.touches[0].pageX);f=c.touches[0].pageX});d.addEventListener("touchend",function(){null!==b&&null!==f&&a(f-b);b=f=null})},$c=function(d){if(uc["default"].isSupported("touch")){var a=y("[data-track-swipe]"),b=y("[data-trackswipe]"),f=function(c){var e=Math.abs(c);if(30<e){var h=D("[data-viewpixel]");Zc(h);d.s({direction:0>c?"left":"right",length:e})}};a?xb(a,f):b&&xb(b,f)}},ad=function(d,a){var b=Date.now();
a=D("img",a);var f=a.length,c=0,e=function(){++c===f&&d.vc({delay:Date.now()-b})};a.forEach(function(h){null!==z("data-lazy",h)&&null!==z("data-src",h)?h.addEventListener("load",function(){h.src===h.dataset.src&&e()}):h.complete?e():h.addEventListener("load",e)})},bd=function(d){var a=d.campaignId,b=d.idType,f=d.slotName,c=d.market,e={eventV1:{anonymizedRequestId:d.anonymizedRequestId,campaignId:a,slotName:f,idType:b,market:c,customerId:d.customerId,sessionId:d.sessionId,lob:d.lob},eventV2:{campaignId:a,
slotName:f,idType:b,market:c,joinId:d.joinId}},h=function(g,m,k){try{var l=na["default"],n=l.event,p=w.__assign({},e[m]);if(k)for(var t in k)Object.prototype.hasOwnProperty.call(k,t)&&(p[t]=k[t]);n.call(l,p,"base-be",Fc[g],{ssd:!0})}catch(q){W(q)}};return{i:h.bind(null,"i","eventV1"),v:h.bind(null,"v","eventV1"),vc:h.bind(null,"vc","eventV1"),c:h.bind(null,"c","eventV1"),s:h.bind(null,"s","eventV1"),ss:h.bind(null,"ss","eventV1"),ia:h.bind(null,"ia","eventV1"),iv2:h.bind(null,"iv2","eventV2"),e:function(g){h("e",
"eventV1",g&&{name:g.name,message:g.message,stack:g.stack})}}},yb=function(d){var a=Nc(d);var b=ya(d).mid;a=bd({anonymizedRequestId:Mc(),campaignId:a,idType:Pc(d),slotName:Qc(),market:b,customerId:null,sessionId:null,lob:"UNKNOWN",joinId:null});var f=T();b=f.innerWidth;f=f.innerHeight;var c=Ma(d),e=c.width;c=c.height;var h=ya(d).aigen;a.i({asins:[].map.call(D("[data-asin]",d),Na),creativeType:Ha(),creativeVariation:Ia(d),version:Ka(d),viewport:La(),weblabs:Ja(d),adWidth:Math.round(e),adHeight:Math.round(c),
viewportWidth:Math.round(b),viewportHeight:Math.round(f),storeBannerUrl:ja("storeBanner",d),customImageUrl:ja("lifestyleImage",d),isAiGen:!!h});Lc(a,d);ad(a,d);Yc(a,d);$c(a);f=T();b=f.innerWidth;f=f.innerHeight;c=Ma(d);e=c.width;c=c.height;h=ya(d).aigen;a.ia&&a.ia({asins:[].map.call(D("[data-asin]",d),Na),creativeType:Ha(),creativeVariation:Ia(d),version:Ka(d),viewport:La(),weblabs:Ja(d),adIndex:pb(d),adId:ob(d),adWidth:Math.round(e),adHeight:Math.round(c),viewportWidth:Math.round(b),viewportHeight:Math.round(f),
storeBannerUrl:ja("storeBanner",d),customImageUrl:ja("lifestyleImage",d),isAiGen:!!h});f=T();b=f.innerWidth;f=f.innerHeight;c=Ma(d);e=c.width;c=c.height;h=ya(d).aigen;a.iv2&&a.iv2({asins:[].map.call(D("[data-asin]",d),Na),creativeType:Ha(),creativeVariation:Ia(d),version:Ka(d),viewport:La(),weblabs:Ja(d),adIndex:pb(d),adId:ob(d),adWidth:Math.round(e),adHeight:Math.round(c),viewportWidth:Math.round(b),viewportHeight:Math.round(f),storeBannerUrl:ja("storeBanner",d),customImageUrl:ja("lifestyleImage",
d),isAiGen:!!h})},x=function(d,a){void 0===a&&(a=1);na["default"].count("sbxGwentClient"+d,a)},U={log:function(d){var a=T();var b=Oc();(a=b&&a.sbxGwentClient&&"number"===typeof a.sbxGwentClient[b]?Date.now()-a.sbxGwentClient[b]:null)?x(d,a):x("NoPageTime")}},cd=function(d){var a=d.url,b=d.onSuccess,f=d.onError;a||f();vc["default"].get(a,{success:function(c){c&&"ok"===c.status?b(c):f()},error:f,abort:f})},Ra;(Ra||(Ra={})).adFeedbackHandler="adFeedbackHandler";var dd=function(d,a,b,f,c){try{var e=JSON.parse(d),
h=w.__read(e,6),g=h[0],m=h[1],k=h[2],l=h[3],n=h[4],p=h[5],t=[];Array.isArray(g)?g.forEach(function(v){return t.push({campaignId:b,creativeId:v})}):t.push({campaignId:b,creativeId:g});var q={adCreativeMetaData:{adCreativeId:Array.isArray(g)?g[0]:g,adId:a,adImpressionId:m,adNetwork:"aax",adProgramId:1010,adCreativeDetails:t},adPlacementMetaData:{adElementId:k,pageType:l,pageUrl:n,searchTerms:p,slotName:f,adProgramId:1010}};return c+"?pl="+encodeURIComponent(JSON.stringify(q))}catch(v){return null}},
zb=function(d){var a=Da["default"].setup().define,b=!!z("data-ad-feedback-clicks"),f=!!z("data-ad-feedback-simulate"),c=d||"AdFeedbackSuccess",e="AdFeedbackPlaceholderClick",h=!1;b&&a(Ra.adFeedbackHandler,"click",function(){U.log(e);"AdFeedbackPlaceholderClick"===e&&(h=!0)});d=z("data-ad-feedback");a=z("data-ad-feedback-url")||"/gp/aq-feedback/lazyLoad/handler/af-link-handler.html";if(d){b=z("data-slot");var g=z("data-aid"),m=z("data-cid");d=dd(d,g,m,b,a);cd({url:d,onSuccess:function(k){var l=k.html;
var n=y('[data-id="afb-content"]');n&&l?(n.innerHTML=l,l=n):l=null;if(k=k.script)n=y().ownerDocument.createElement("script"),n.type="text/javascript",n.innerHTML=k,y().appendChild(n);U.log(c);e="AdFeedbackLinkClick";l&&h&&f&&((k=y("a",l))?(k.click(),k=!0):k=!1,U.log(k?"AdFeedbackSimulateClickSuccess":"AdFeedbackSimulateClickFail"))},onError:function(){U.log("AdFeedbackFallback");h&&f&&U.log("AdFeedbackSimulateClickFail")}})}},qa=function(d,a){var b,f=[];try{for(var c=w.__values(d.split(/[-_]/)),e=
c.next();!e.done;e=c.next()){var h=e.value;f.push(h.charAt(0).toUpperCase()+h.slice(1));if("creativeLevel"===a&&("desktop"===h||"mobile"===h))break}}catch(m){var g={error:m}}finally{try{e&&!e.done&&(b=c.return)&&b.call(c)}finally{if(g)throw g.error;}}return f.join("")},fd=function(d,a,b,f,c,e,h,g,m,k,l){return w.__awaiter(void 0,void 0,void 0,function(){var n,p,t;return w.__generator(this,function(q){switch(q.label){case 0:n=function(){return{adCreativeMetaData:{adCreativeDetails:ed(a,g,m,k,l)},adFeedbackLabelId:d}},
p=function(v){var u=v.baseMessage,A=v.deviceType,B=v.tabletEnv,C=v.slotName;C=w.__read([qa(v.creativeId,"creativeLevel"),qa(C,"slotLevel")],2);v=C[0];C=C[1];x(u);A&&(A=u+"_"+A,B&&(A+="_"+B),x(A));v&&x(u+"_"+v);C&&x(u+"_"+C)},q.label=1;case 1:return q.trys.push([1,3,,4]),[4,b(n)];case 2:return q.sent(),p({baseMessage:"EnableAdFeedbackSuccess",deviceType:f,tabletEnv:c,creativeId:e,slotName:h}),[3,4];case 3:return t=q.sent(),p({baseMessage:"EnableAdFeedbackFailure",deviceType:f,tabletEnv:c,creativeId:e,
slotName:h}),W(t),[3,4];case 4:return[2]}})})},gd=function(d){if(d){var a=d.split(" ");a.map(function(b,f){0<f&&(a[f]=b.substring(3,b.length))});a.pop();a.shift();return a}},ed=function(d,a,b,f,c){var e=[],h=z("data-card-metrics-id")||"",g=z("data-slot")||"";h=w.__read([qa(h,"creativeLevel"),qa(g,"slotLevel")],2);var m=h[0],k=h[1];c&&c()!==d.length&&(d=d.filter(function(l){return y('[data-aid="'+l.adId+'"]')}));d.forEach(function(l,n){var p='[data-aid="'+l.adId+'"]';for(var t=y(p),q=a&&a()||document.body,
v,u=0;(b?u<b.length:0>u)&&!(v=y(p+' div[class*="'+(null===b||void 0===b?void 0:b[u])+'"] img'));u++);v?x("AfImagePresent_"+m):x("AfImageMissing_"+m);p=(null===v||void 0===v?void 0:v.getAttribute("src"))||void 0;u=gd((null===v||void 0===v?void 0:v.getAttribute("srcset"))||void 0);var A=(null===u||void 0===u?void 0:u.length)||1;v=[];for(var B=0;B<A;B++)v.push({url:(null===u||void 0===u?void 0:u[B])||""});p={url:p?p:""};$a("SelectionSignals",l.selectionSignals,m,k);$a("AdvertiserIdNS",l.advertiserIdNS,
m,k);if(t){(u=1===d.length||f)||(t=jb(t),q?((u=y('[data-index="'+n+'"]'))?u=0===u.offsetHeight&&0===u.offsetWidth?!0:!1:(K["default"].log("container Element for ad number "+n+" is not found","WARN","DSA/AdFeedback"),u=!0),u?u=!1:(q=jb(q),t.left===q.left||t.right===q.right?(u=t.left,(u=u>=q.left&&u<=q.right)||(t=t.right,u=t>=q.left&&t<=q.right),q=u):(u=t.left,(u=u>q.left&&u<q.right)||(t=t.right,u=t>q.left&&t<q.right),q=u),u=q)):u=void 0);if(u){q=e.push;t=l.campaignId;u=l.adId;A=l.title;v={lowResolutionImage:ab(p),
highResolutionImages:ab(v)};if(l.selectionSignals){p=l.selectionSignals;switch(p.pastActivity){case "STORE_ONLY":B=1;break;default:B=0}p=w.__assign(w.__assign({},p),{pastActivity:B})}else p=void 0;q.call(e,{campaignId:t,adId:u,adCreativeIndex:n,title:A,adCreativeImage:v,selectionSignals:p,advertiserIdNS:l.advertiserIdNS})}x("adElementPresent_"+m)}else x("adElementMissing"),K["default"].log("adElement is not found: "+JSON.stringify(l),"WARN","DSA/AdFeedback"),x("adElementMissing_"+m)});return e},Ab=
function(){D('[data-id="cta"]').forEach(function(d){if(d.parentElement){var a=y('[data-id*="cta-fallback"]',d.parentElement),b=y(".a-truncate",d),f=y(".a-truncate-full",d);b&&f&&(f.clientHeight>b.clientHeight&&a?(a.style.display="block",d.parentElement.removeChild(d)):(a=d.parentElement.getAttribute("aria-hidden"),a&&"false"!==a||(a=d.getAttribute("data-label")||f.innerHTML,d.parentElement.setAttribute("aria-label",a)),(b=y('[data-id*="cta-chevron"]',d))&&!f.hasAttribute("data-chevron")&&(f.setAttribute("data-chevron",
"true"),d=f.innerHTML.split(" "),a=d.pop(),b=b.innerHTML,f.innerHTML="<span>"+d.join(" ")+" </span><span>"+a+"&nbsp;"+b+"</span>")))}})},hd=function(d){var a=z("data-src",d)||"",b=z("data-srcset",d)||"",f=d.cloneNode();f.removeAttribute("data-src");f.removeAttribute("data-srcset");f.removeAttribute("data-lazy");f.srcset=b;f.src=a;d.parentNode&&d.parentNode.insertBefore(f,d);f.onload=function(){d.style.opacity="0";U.log("LazyLoaded")}},id=function(){var d=D('[class*="eelModalRoot"]');d&&d.forEach(function(a,
b){var f=z("data-modal-trigger",a),c=z("data-title",a),e=z("data-modal-settings",a);e=JSON.parse(e||"{}");if(f){b="eel-cards-modal-"+b;var h="."+a.className.split(" ")[0],g=gb["default"].create(b,h,{closeButton:(null===e||void 0===e?void 0:e.closeButton)||!1,a11yOpenMessage:c||"Energy Efficiency & Product Fiche",width:(null===e||void 0===e?void 0:e.width)||800});c=za.setup();e=c.define;c=c.attach;g.once("beforeShow",function(){V["default"].loadDescendantImagesManually(a)});e("modal-handler-"+f,["click"],
function(){g.show()});e("modal-close-handler-"+f,["click"],function(){g.hide()});e=y('[data-mix-operations="modal-handler-'+f+'"]');f=y('[data-mix-operations="modal-close-handler-'+f+'"]');e&&f&&(c("modalHandler",e),c("modalClose",f))}})},jd=function(d){var a=function(f,c){f={$event:{preventDefault:V["default"].$.noop,stopPropagation:V["default"].$.noop},$target:f.getContent().find('[data-a-tab-name="'+c+'"]'),data:{name:"energyEfficiencyTabSet"}};V["default"].trigger("a:declarative:a-tabs:click",
f)},b=function(f,c){var e=f&&f.$event,h=f&&f.data||{},g=h.name;e&&e.preventDefault&&e.preventDefault();e&&e.stopPropagation&&e.stopPropagation();f&&e&&h&&g&&c&&(e=c.get(g),e||(V["default"].on("a:popover:beforeShow:"+g,function(m){var k,l,n;m.popover&&m.popover.getContent&&(m=m.popover.getContent(),null===(l=null===(k=null===m||void 0===m?void 0:m.find(".a-manually-loaded"))||void 0===k?void 0:k.parent())||void 0===l?void 0:l.css("min-height",null!==(n=h.modalHeight)&&void 0!==n?n:800),V["default"].loadDescendantImagesManually(m))}),
e=c.create(f.$target,h)),e&&(e.show(),h.activeTabName&&a(e,h.activeTabName)))};d&&d.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(f){V["default"].declarative("card-energy-efficiency-secondary-view","click",function(c){b(c,f)})})},ld=function(){D("span[data-ad-deal-end-time]").forEach(function(d){var a=z("data-ad-deal-end-time",d);d&&null!==a&&kd(d,a)})},kd=function(d,a){var b=Za.interval(function(){var f=(new Date(a)).getTime(),c=Date.now();c=Math.floor((f-c)/1E3);
if(0>c)clearInterval(b);else{var e=Math.floor(c/60%60);f=Math.floor(c%60);c=("0"+Math.floor(c/3600%24)).slice(-2);e=("0"+e).slice(-2);f=("0"+f).slice(-2);d.innerText=c+":"+e+":"+f}},1E3)},Bb=function(d,a){a=a||wa["default"].cardRoot;return!d||Fa(a,d)?a:a.querySelector(d)},Sa=function(d,a,b){void 0===b&&(b=wa["default"].cardRoot);for(;d&&d!==b;){if(d.matches(a))return d;d=d.parentElement}return(null===d||void 0===d?0:d.matches(a))?d:null},md=function(){var d=D("[data-sbelementid]");d.length&&d.forEach(function(a){var b=
a.dataset.sbelementid;b&&a.addEventListener("click",function(f){var c=f.target,e=Sa(c,"a");if(!e)if(b.includes("_asin_")){e=Sa(c,"[data-asin]");if(!e)return;e=y("a",e);if(Sa(c,"button[data-mix-operations]")||!e)return}else return;f.preventDefault();f.stopPropagation();f=f.ctrlKey||f.metaKey;var h=new URL(e.href);h.pathname.endsWith("/")||(h.pathname+="/");h.searchParams.set("_encoding","UTF8");h.searchParams.set("ref_",b);c=y("[data-sbqueryparameters]");c=((null===c||void 0===c?void 0:c.dataset)||
{}).sbqueryparameters;if(c=void 0===c?null:c)c=function(g){try{var m=JSON.parse(g);return"object"!==typeof m||null===m?void 0:m}catch(k){W("Error parsing JSON in enableClickTracking",k)}}(c),Object.entries(c||{}).forEach(function(g){var m=w.__read(g,2);g=m[0];m=m[1];g&&m&&(b.includes("_asin_")?["lp_mat_key","lp_query","lp_slot","lp_page_asin","lp_asins"].includes(g)||h.searchParams.set(g,m):h.searchParams.set(g,m))});c=h.toString();f||"_blank"===e.target?window.open(c,"_blank"):window.location.href=
c})})},nd=function(d){return function(){return w.__awaiter(void 0,void 0,void 0,function(){var a,b,f,c,e,h,g,m,k,l,n,p,t,q,v,u,A,B,C;return w.__generator(this,function(I){switch(I.label){case 0:return U.log("Loaded"),a=d||{},b=a.loadAdFeedback,f=a.onLoad,c=a.onInit,e=a.isMobile,h=a.enableAdFeedback,g=a.creativeContainer,m=a.creativeImageContainer,k=a.bypassAdFeedbackViewportCheck,l=a.renderedAdsCount,c&&c(),[4,Ca["default"].pageReady];case 1:I.sent();U.log("Ready");try{var G=y(".sbx-no-js",void 0);
G&&G.classList.remove("sbx-no-js");try{var E=D("[data-cid]");E.length?E.forEach(yb):yb()}catch(L){W(L)}try{Ab(),xa("resize",Ab,void 0)}catch(L){W(L)}try{D('img[data-lazy="true"]').forEach(hd)}catch(L){W(L)}y('[class*="eelModalRoot"]')?id():y('[data-action*="card-energy-efficiency-"]')&&jd(window.P);var J,N;if(!("-webkit-line-clamp"in F["default"].cardRoot.ownerDocument.body.style||"lineClamp"in F["default"].cardRoot.ownerDocument.body.style)){var da=D('[class*="_sbTruncatedTitle_"]');if(da.length)try{for(var la=
w.__values(da),Y=la.next();!Y.done;Y=la.next()){var H=Y.value,ea=parseInt(H.getAttribute("data-totallines")||"1"),Z=Math.ceil(parseFloat((null===(N=F["default"].cardRoot.ownerDocument.defaultView)||void 0===N?void 0:N.getComputedStyle(H).lineHeight)||"1.3em"))*ea;if(!(H.scrollHeight<=Z)){for(;H.scrollHeight>Z;)H.innerText=H.innerText.slice(0,-1);H.innerText=H.innerText.slice(0,-3);H.innerText+="\u2026"}}}catch(L){var ma={error:L}}finally{try{Y&&!Y.done&&(J=la.return)&&J.call(la)}finally{if(ma)throw ma.error;
}}}md();f&&f();z("data-deal-badge-automated")&&z("data-ad-deal-end-time")&&ld();G=e;if(void 0!==G&&!window.sbxGwentClientDPR)try{window.sbxGwentClientDPR=!0,x((G?"Mobile":"Desktop")+"DPR"+(4>=Math.round(2*window.devicePixelRatio)/2?Math.round(2*window.devicePixelRatio)/2:"4Plus"))}catch(L){W(L)}}catch(L){W(L)}n=z("data-ad-feedback-label-id");p=z("data-ad-creative-list");t=z("data-device-type")||"";q=z("data-tabletenv")||"";v=z("data-card-metrics-id")||"";u=z("data-slot")||"";A=qa(v,"creativeLevel");
if(!n||!p)return[3,6];I.label=2;case 2:return I.trys.push([2,4,,5]),B=JSON.parse(p),[4,fd(n,B,h,t,q,v,u,g,m,k,l)];case 3:return I.sent(),x("NewAdFeedbackImplementationEnabled_"+A),[3,5];case 4:return C=I.sent(),b&&zb(),W("Failed to generate adFeedback rendering payload: "+C,"DSA/AdFeedback"),x("FallbackToOldAdFeedbackImplementation_"+A),[3,5];case 5:return[3,7];case 6:b&&zb(),x("FallbackToOldAdFeedbackImplementation_"+A),W("Missing adFeedbackLabelId or adCreativeList","DSA/AdFeedback"),I.label=7;
case 7:return[2]}})})}},ra,r={CLICK:"CLICK",IMPRESSION:"IMPRESSION",VIDEO_COMPLETE:"COMPLETE",VIDEO_FIRST_QUARTILE:"FIRST_QUARTILE",VIDEO_MIDPOINT:"MIDPOINT",VIDEO_PROGRESS_FIVE_SECONDS:"PROGRESS_5_SEC",VIDEO_THIRD_QUARTILE:"THIRD_QUARTILE",VIDEO_UNMUTE:"UNMUTE",VIDEO_VIEWED:"VIEWED",VIDEO_VM_AD_UNIT_VIEWED:"ViewMetricsAdUnitViewed",VIDEO_VM_PROGRESS_FIVE_SECONDS:"ViewMetricsVideoProgressFiveSeconds",VIDEO_VM_FIRST_QUARTILE:"ViewMetricsVideoFirstQuartile",VIDEO_VM_MIDPOINT:"ViewMetricsVideoMidpoint",
VIDEO_VM_THIRD_QUARTILE:"ViewMetricsVideoThirdQuartile",VIDEO_VM_COMPLETE:"ViewMetricsVideoComplete",VIDEO_VM_UNMUTE:"ViewMetricsVideoUnmute",VIDEO_VM_VIEWED:"ViewMetricsVideoViewed",VIDEO_VM_POST_FAILURE:"ViewMetricsPostFailure",ACE_VIDEO_RESPONSE_RECEIVED:"AceVideoResponseReceived",VIDEO_CAPTIONS_DISABLED:"CaptionsDisabled",VIDEO_CAPTIONS_ENABLED:"CaptionsEnabled",VIDEO_CLEARED_ON_BROWSER_HIDDEN:"VideoClearedOnBrowserHidden",VIDEO_CLICKED:"VideoClicked",VIDEO_LOADED_ON_BROWSER_VISIBLE:"VideoLoadedOnBrowserVisible",
VIDEO_OFF_SCREEN:"VideoOffScreen",VIDEO_ON_SCREEN:"VideoOnScreen",VIDEO_PAUSED:"VideoPaused",VIDEO_PAUSED_ON_AUTOPLAY_DISABLED:"VideoPausedOnAutoplayDisabled",VIDEO_SOUND_OFF:"VideoSoundOff",VIDEO_SOUND_ON:"VideoSoundOn",VIDEO_ABORTED:"VideoAborted",VIDEO_BUFFERING_ENDED:"VideoBufferingEnded",VIDEO_BUFFERING_STARTED:"VideoBufferingStarted",VIDEO_DURATION_PLAYED:"VideoDurationPlayed",VIDEO_PLAY_PROMISE_REJECTED:"VideoPlayPromiseRejected",VIDEO_PLAYBACK_COMPLETED:"PlaybackCompleted",VIDEO_PLAYBACK_FAILURE:"VideoPlaybackFailure",
VIDEO_PLAYBACK_FAILED_TO_START_AFTER_PLAY:"PlaybackFailedToStartAfterPlay",VIDEO_PLAYBACK_INITIATED:"VideoPlaybackInitiated",VIDEO_PLAYBACK_STARTED:"VideoPlaybackStarted",VIDEO_READY_FOR_PLAYBACK:"VideoReadyForPlayback",VIDEO_CLIENT_LOAD_TO_FIRST_FRAME:"ClientLoadToFirstFrame",VIDEO_TIME_TO_FIRST_FRAME:"TimeToFirstFrame",VIDEO_TIME_TO_FIRST_INTERRUPT:"TimeToFirstInterrupt",BRAND_CTA_LINK_CLICKED:"BrandCtaLinkClicked",BRAND_LOGO_CLICKED:"BrandLogoClicked",HEADLINE_CLICKED:"HeadlineClicked",BACKGROUND_CLICKED:"BackgroundClicked",
PRODUCT_CLICKED:"ProductClicked"};[r.VIDEO_VIEWED,r.VIDEO_PROGRESS_FIVE_SECONDS,r.VIDEO_FIRST_QUARTILE,r.VIDEO_MIDPOINT,r.VIDEO_THIRD_QUARTILE,r.VIDEO_COMPLETE,r.VIDEO_UNMUTE];var od=[r.CLICK,r.BACKGROUND_CLICKED,r.BRAND_LOGO_CLICKED,r.BRAND_CTA_LINK_CLICKED,r.HEADLINE_CLICKED,r.PRODUCT_CLICKED,r.VIDEO_CLICKED],aa={"basebe.Clicks.6":"basebe.Clicks.6","basebe.Impressions.8":"basebe.Impressions.8","basebe.carousel.1":"basebe.carousel.1"},pd=(ra={},ra[aa["basebe.Clicks.6"]]="base-be",ra[aa["basebe.Impressions.8"]]=
"base-be",ra[aa["basebe.carousel.1"]]="base-be",ra),cb={LOGO:"LOGO",HEADLINE:"HEADLINE",IMAGE:"IMAGE",VIDEO:"VIDEO",ASIN:"ASIN",CTA:"CTA",SPONSORED_LABEL:"SPONSORED_LABEL",BACKGROUND:"BACKGROUND"},Sb={LOGO:'[data-daretype="logoLink"]',HEADLINE:'[data-daretype="headlineLink"]',LIFESTYLE_IMAGE:'[data-daretype="lifestyleImageLink"]',VIDEO:'[data-dare="Video"]',ASIN:'[data-component="ASIN"]',CTA:'[data-daretype="ctaLink"]',BACKGROUND:'[data-daretype="backgroundLink"]'},ec={"savx:action":"savx:action",
"savx:deeplinking":"savx:deeplinking"},ac={SPARKLE_RELATED_QUESTION:"SPARKLE_RELATED_QUESTION"},bc={INVOKE_NILE_BACKEND_API:"INVOKE_NILE_BACKEND_API",INVOKE_NILE_BACKEND_API_WITH_ASIN:"INVOKE_NILE_BACKEND_API_WITH_ASIN"},cc={NileAdsSparkleRelatedQuestion:"NileAdsSparkleRelatedQuestion"},dc={SPARKLE_RELATED_QUESTION:"SPARKLE_RELATED_QUESTION"},Aa=function(){Aa=Object.assign||function(d){for(var a,b=1,f=arguments.length;b<f;b++){a=arguments[b];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&
(d[c]=a[c])}return d};return Aa.apply(this,arguments)},Tb=function(d,a,b,f){function c(e){return e instanceof b?e:new b(function(h){h(e)})}return new (b||(b=Promise))(function(e,h){function g(l){try{k(f.next(l))}catch(n){h(n)}}function m(l){try{k(f["throw"](l))}catch(n){h(n)}}function k(l){l.done?e(l.value):c(l.value).then(g,m)}k((f=f.apply(d,a||[])).next())})},Ub=function(d,a){function b(k){return function(l){return f([k,l])}}function f(k){if(e)throw new TypeError("Generator is already executing.");
for(;m&&(m=0,k[0]&&(c=0)),c;)try{if(e=1,h&&(g=k[0]&2?h["return"]:k[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,k[1])).done)return g;if(h=0,g)k=[k[0]&2,g.value];switch(k[0]){case 0:case 1:g=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;h=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys,g=0<g.length&&g[g.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!g||k[1]>g[0]&&k[1]<g[3]))c.label=k[1];else if(6===k[0]&&
c.label<g[1])c.label=g[1],g=k;else if(g&&c.label<g[2])c.label=g[2],c.ops.push(k);else{g[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(d,c)}catch(l){k=[6,l],h=0}finally{e=g=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,h,g,m=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return m.next=b(0),m["throw"]=b(1),m["return"]=b(2),"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),
m},Cb=function(d,a,b,f){function c(e){return e instanceof b?e:new b(function(h){h(e)})}return new (b||(b=Promise))(function(e,h){function g(l){try{k(f.next(l))}catch(n){h(n)}}function m(l){try{k(f["throw"](l))}catch(n){h(n)}}function k(l){l.done?e(l.value):c(l.value).then(g,m)}k((f=f.apply(d,a||[])).next())})},Db=function(d,a){function b(k){return function(l){return f([k,l])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;m&&(m=0,k[0]&&(c=0)),c;)try{if(e=1,h&&(g=k[0]&
2?h["return"]:k[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,k[1])).done)return g;if(h=0,g)k=[k[0]&2,g.value];switch(k[0]){case 0:case 1:g=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;h=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys,g=0<g.length&&g[g.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!g||k[1]>g[0]&&k[1]<g[3]))c.label=k[1];else if(6===k[0]&&c.label<g[1])c.label=g[1],g=k;else if(g&&c.label<
g[2])c.label=g[2],c.ops.push(k);else{g[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(d,c)}catch(l){k=[6,l],h=0}finally{e=g=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,h,g,m=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return m.next=b(0),m["throw"]=b(1),m["return"]=b(2),"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m},Eb=function(d,a,b){if(b||
2===arguments.length)for(var f=0,c=a.length,e;f<c;f++)!e&&f in a||(e||(e=Array.prototype.slice.call(a,0,f)),e[f]=a[f]);return d.concat(e||Array.prototype.slice.call(a))},eb=function(){function d(a){var b=this,f,c,e,h,g,m,k;this._autoplay=!1;this._root=a.el;this._strategy=a.strategy;this._root.setAttribute("data-initialized","true");a=parseInt(null!==(f=this._root.getAttribute("data-slideduration"))&&void 0!==f?f:"");this._slideDuration=isNaN(a)?d.DEFAULT_SLIDE_DURATION:a;this._root.style.setProperty("--dare-c--slide-duration",
"".concat(this._slideDuration,"ms"));f=parseInt(null!==(c=this._root.getAttribute("data-transitionduration"))&&void 0!==c?c:"");this._transitionDuration=isNaN(f)?d.DEFAULT_TRANSITION_DURATION:f;this._root.style.setProperty("--dare-c--transition-duration","".concat(this._transitionDuration,"ms"));c=this._strategy.getElement('[data-dare="InteractiveCarouselItems"]',this._root);if(!(c instanceof HTMLElement))throw Error("unable to initialize InteractiveCarousel due to missing itemsWrapper");this._itemsWrapper=
c;this._indicators=Eb(Eb([],this._strategy.getElements('[data-dare="Indicator"]',this._root),!0),this._strategy.getElements('[data-dare="TabIndicator"]',this._root),!0);this._indicators.forEach(function(n){var p=!1;n.addEventListener("focusin",function(){p="true"===b._root.getAttribute("data-paused");b.pause()});n.addEventListener("focusout",function(){p||b.play()});n.addEventListener("keydown",function(t){var q;switch(t.key){case "ArrowRight":b.next();break;case "ArrowLeft":b.previous();break;case "Home":b.moveTo(0);
break;case "End":b.moveTo(b._items.length-1)}null===(q=b._indicators[b._activeIndex])||void 0===q?void 0:q.focus()})});this._indicators.forEach(function(n){"TabIndicator"===n.getAttribute("data-dare")&&n.addEventListener("click",function(){var p=b._indicators.indexOf(n);b.moveTo(p)})});this._items=this._strategy.getElements("& > div",this._itemsWrapper);var l=-1;this._items.forEach(function(n,p){"true"===n.getAttribute("data-active")&&(l=p)});-1===l&&(l=0);this._items[l].setAttribute("data-active",
"true");null===(e=this._indicators[l])||void 0===e?void 0:e.setAttribute("data-active","true");null===(h=this._indicators[l])||void 0===h?void 0:h.setAttribute("aria-selected","true");null===(g=this._indicators[l])||void 0===g?void 0:g.removeAttribute("tabindex");this._activeIndex=l;if(this._pausePlayButton=this._strategy.getElement('[data-mix-operations="dare-c--pause-play"]',this._root))this._pauseLabel=null!==(m=this._pausePlayButton.getAttribute("data-pause"))&&void 0!==m?m:void 0,this._playLabel=
null!==(k=this._pausePlayButton.getAttribute("data-play"))&&void 0!==k?k:void 0,this._pausePlayButton.addEventListener("click",function(){b.pausePlay()}),this._autoplay=!0;(e=this._strategy.getElement('[data-mix-operations="dare-c--next"]',this._root))?(this._nextButton=e,e.addEventListener("click",function(){return b.next()})):this._strategy.log("unable to enable next button, element not found","ERROR");(e=this._strategy.getElement('[data-mix-operations="dare-c--previous"]',this._root))?(this._previousButton=
e,e.addEventListener("click",function(){return b.previous()})):this._strategy.log("unable to enable previous button, element not found","ERROR");e=this._strategy.matchMedia("(prefers-reduced-motion: reduce)");!e||e.matches?(this.disableAutoplay(),this.pause(),this._autoplay=!1):e&&!e.matches&&this._autoplay&&this.play();null===e||void 0===e?void 0:e.addEventListener("change",function(n){n.matches&&(b.disableAutoplay(),b.pause())});this.handleWindowBlur()}d.prototype._ajaxLoadContent=function(a){return Cb(this,
void 0,void 0,function(){var b,f,c,e,h,g,m;return Db(this,function(k){b=this._strategy.getElements("[data-ajaxdata]");if(0===b.length)return[2];f=b[0].dataset.ajaxtreatment;c=void 0===f?"C":f;e=function(){var l=b.map(function(n){var p=n.dataset.ajaxdata;return a(n,void 0===p?"{}":p)});return Promise.all(l)};switch(c){case "T1":return[2,this._strategy.pageMarker("load").then(function(){return e()})];case "T2":return[2,this._strategy.pageMarker("ready").then(function(){return e()})];case "T3":h=null!==
(m=null===(g=this._strategy.getElement("[data-pagenumber]"))||void 0===g?void 0:g.getAttribute("data-pagenumber"))&&void 0!==m?m:"0";if(1===+h)return ha(this._strategy)?db("af",this._strategy,e):(this._strategy.log("MBC Sparkle P object missing from WINDOW","ERROR"),this._strategy.pageMarker("load").then(function(){return e()})),[2];this._strategy.log("MBC Sparkle loaded off page 1","ERROR");return[2,this._strategy.pageMarker("load").then(function(){return e()})];case "T4":return[2,Promise.resolve()];
default:return this._strategy.log("MBC Sparkle AJAX Load Missing Treatment","ERROR"),[2,this._strategy.pageMarker("load").then(function(){return e()})]}})})};d.prototype.handleWindowBlur=function(){var a=this,b=!1,f=this._strategy.getWindow();f.addEventListener("blur",function(){b="true"===a._root.getAttribute("data-paused");a.pause()});f.addEventListener("focus",function(){b||a.play()})};d.prototype.enableAutoplay=function(){this._root.setAttribute("data-autoplay-enabled","true");var a=new CustomEvent("darecarouselautoplayenabled");
this._root.dispatchEvent(a)};d.prototype.disableAutoplay=function(){this._root.removeAttribute("data-autoplay-enabled");var a=new CustomEvent("darecarouselautoplaydisabled");this._root.dispatchEvent(a)};d.prototype.play=function(){this.enableAutoplay();this._root.removeAttribute("data-paused");this._pausePlayButton&&this._pauseLabel&&this._pausePlayButton.setAttribute("aria-label",this._pauseLabel);var a=new CustomEvent("darecarouselplay");this._root.dispatchEvent(a)};d.prototype.pause=function(){this._root.setAttribute("data-paused",
"true");this._pausePlayButton&&this._playLabel&&this._pausePlayButton.setAttribute("aria-label",this._playLabel);var a=new CustomEvent("darecarouselpause");this._root.dispatchEvent(a)};d.prototype.pausePlay=function(){"true"===this._root.getAttribute("data-paused")?this.play():this.pause()};d.prototype.moveTo=function(a){var b=this;0>a&&(a=0);a>=this._items.length&&(a=this._items.length);this._items.forEach(function(c,e){var h,g,m,k,l,n;e===a?(c.setAttribute("data-active","true"),null===(h=b._indicators[e])||
void 0===h?void 0:h.setAttribute("data-active","true"),null===(g=b._indicators[e])||void 0===g?void 0:g.setAttribute("aria-selected","true"),null===(m=b._indicators[e])||void 0===m?void 0:m.removeAttribute("tabindex")):(c.removeAttribute("data-active"),null===(k=b._indicators[e])||void 0===k?void 0:k.removeAttribute("data-active"),null===(l=b._indicators[e])||void 0===l?void 0:l.removeAttribute("aria-selected"),null===(n=b._indicators[e])||void 0===n?void 0:n.setAttribute("tabindex","-1"))});this._activeIndex=
a;var f=new CustomEvent("darecarouselmoveto",{detail:{nextIndex:a}});this._root.dispatchEvent(f)};d.prototype.moveBy=function(a){if(1<a||0===a)a=1;-1>a&&(a=-1);a=this._activeIndex+a;a>=this._items.length?a=0:0>a&&(a=this._items.length-1);this.moveTo(a)};d.prototype.next=function(){this.moveBy(1)};d.prototype.previous=function(){this.moveBy(-1)};d.DEFAULT_SLIDE_DURATION=2500;d.DEFAULT_TRANSITION_DURATION=350;return d}(),Wb=function(){function d(a){this._activeIndex=0;this._root=a.el;this._strategy=
a.strategy;a=this._strategy.getElement('[data-dare="ScrollableCarouselList"]',this._root);if(!(a instanceof HTMLUListElement))throw Error("unable to find ScrollableCarouselList");this._list=a;this._items=this._strategy.getElements("& > li",this._list).filter(function(b){return b instanceof HTMLLIElement});this._enableIndicators()}d.prototype._ajaxLoadContent=function(a){return Cb(this,void 0,void 0,function(){var b,f,c,e,h,g,m;return Db(this,function(k){b=this._strategy.getElements("[data-ajaxdata]");
if(0===b.length)return[2];f=b[0].dataset.ajaxtreatment;c=void 0===f?"C":f;e=function(){var l=b.map(function(n){var p=n.dataset.ajaxdata;return a(n,void 0===p?"{}":p)});return Promise.all(l)};switch(c){case "T1":return[2,this._strategy.pageMarker("load").then(function(){return e()})];case "T2":return[2,this._strategy.pageMarker("ready").then(function(){return e()})];case "T3":h=null!==(m=null===(g=this._strategy.getElement("[data-pagenumber]"))||void 0===g?void 0:g.getAttribute("data-pagenumber"))&&
void 0!==m?m:"0";if(1===+h)return ha(this._strategy)?db("af",this._strategy,e):(this._strategy.log("MBC Sparkle P object missing from WINDOW","ERROR"),this._strategy.pageMarker("load").then(function(){return e()})),[2];this._strategy.log("MBC Sparkle loaded off page 1","ERROR");return[2,this._strategy.pageMarker("load").then(function(){return e()})];case "T4":return[2,Promise.resolve()];default:return this._strategy.log("MBC Sparkle AJAX Load Missing Treatment","ERROR"),[2,this._strategy.pageMarker("load").then(function(){return e()})]}})})};
d.prototype._enableIndicators=function(){var a=this,b=this._strategy.getElements('[data-dare="Indicator"]',this._root);if(0===b.length)this._strategy.log("not enabling scrollable carousel indicators due to none present","WARN");else{var f=this._strategy.createIntersectionObserver(function(c){var e=a._activeIndex;c.forEach(function(h){h.isIntersecting&&(e=a._items.findIndex(function(g){return g===h.target}))});a._activeIndex!==e&&(a._activeIndex=e);b.forEach(function(h,g){g===a._activeIndex?h.setAttribute("data-active",
"true"):h.removeAttribute("data-active")})},{threshold:.5});this._items.forEach(function(c){return f.observe(c)})}};return d}(),va=function(){va=Object.assign||function(d){for(var a,b=1,f=arguments.length;b<f;b++){a=arguments[b];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c])}return d};return va.apply(this,arguments)},ta=function(d,a,b,f){function c(e){return e instanceof b?e:new b(function(h){h(e)})}return new (b||(b=Promise))(function(e,h){function g(l){try{k(f.next(l))}catch(n){h(n)}}
function m(l){try{k(f["throw"](l))}catch(n){h(n)}}function k(l){l.done?e(l.value):c(l.value).then(g,m)}k((f=f.apply(d,a||[])).next())})},ua=function(d,a){function b(k){return function(l){return f([k,l])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;m&&(m=0,k[0]&&(c=0)),c;)try{if(e=1,h&&(g=k[0]&2?h["return"]:k[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,k[1])).done)return g;if(h=0,g)k=[k[0]&2,g.value];switch(k[0]){case 0:case 1:g=k;break;case 4:return c.label++,
{value:k[1],done:!1};case 5:c.label++;h=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys,g=0<g.length&&g[g.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!g||k[1]>g[0]&&k[1]<g[3]))c.label=k[1];else if(6===k[0]&&c.label<g[1])c.label=g[1],g=k;else if(g&&c.label<g[2])c.label=g[2],c.ops.push(k);else{g[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(d,c)}catch(l){k=[6,l],h=0}finally{e=g=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c=
{label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,h,g,m=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return m.next=b(0),m["throw"]=b(1),m["return"]=b(2),"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m},Zb=function(d,a,b,f){function c(e){return e instanceof b?e:new b(function(h){h(e)})}return new (b||(b=Promise))(function(e,h){function g(l){try{k(f.next(l))}catch(n){h(n)}}function m(l){try{k(f["throw"](l))}catch(n){h(n)}}
function k(l){l.done?e(l.value):c(l.value).then(g,m)}k((f=f.apply(d,a||[])).next())})},$b=function(d,a){function b(k){return function(l){return f([k,l])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;m&&(m=0,k[0]&&(c=0)),c;)try{if(e=1,h&&(g=k[0]&2?h["return"]:k[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,k[1])).done)return g;if(h=0,g)k=[k[0]&2,g.value];switch(k[0]){case 0:case 1:g=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;
h=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys,g=0<g.length&&g[g.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!g||k[1]>g[0]&&k[1]<g[3]))c.label=k[1];else if(6===k[0]&&c.label<g[1])c.label=g[1],g=k;else if(g&&c.label<g[2])c.label=g[2],c.ops.push(k);else{g[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(d,c)}catch(l){k=[6,l],h=0}finally{e=g=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(g[0]&1)throw g[1];
return g[1]},trys:[],ops:[]},e,h,g,m=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return m.next=b(0),m["throw"]=b(1),m["return"]=b(2),"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m},Fb=function(){return function(){}}(),qd=function(){function d(){}d.prototype.logNexusEvent=function(a,b,f,c){var e,h=null===(e=this.getWindow().ue)||void 0===e?void 0:e.event;h?h(a,b,f,c):this.log("unable to log nexus event due to no window.ue!","ERROR")};d.prototype.logCount=
function(a,b,f){var c,e=null===(c=this.getWindow().ue)||void 0===c?void 0:c.count;if(e)return e(a,b,f);this.log("unable to log count due to no window.ue!","ERROR")};d.prototype.getWidgetDimensions=function(){var a,b,f=this.getWindow(),c=f.innerWidth;f=f.innerHeight;var e=null!==(b=null===(a=this.getElement())||void 0===a?void 0:a.getBoundingClientRect())&&void 0!==b?b:{};a=e.width;b=e.height;return{width:void 0===a?0:a,height:void 0===b?0:b,viewportWidth:c,viewportHeight:f}};return d}(),rd=function(){function d(a){var b=
this;this.eventSequence=this.dictionaryIndex=this.batchSize=0;this.eventsDictionary={};this.eventsQueue=[];this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.reverseEventsDictionary={};this.currentlyFlushing=!1;this.endpoint=a.endpoint;this.strategy=a.strategy;a=this.strategy.getWindow();a.addEventListener("beforeunload",function(){return b.beforeUnload()});a.addEventListener("blur",function(){return b.beforeUnload()});a.addEventListener("pagehide",function(){return b.beforeUnload()});
this.strategy.getDocument().addEventListener("visibilitychange",function(){return b.beforeUnload()});if(a.app){var f=a.app.willDisappear;a.app.willDisappear=function(){f&&f();b.beforeUnload()}}}d.prototype.flush=function(a){var b,f;void 0===a&&(a=!1);this.currentlyFlushing||(this.currentlyFlushing=!0,null!==(f=null===(b=this.eventsQueue)||void 0===b?void 0:b.length)&&void 0!==f&&f&&(a||this.strategy.getWindow().navigator.onLine?(a=JSON.stringify({cs:{dct:this.reverseEventsDictionary},events:this.eventsQueue}),
this.send(a),this.dictionaryIndex=this.batchSize=0,this.eventsDictionary={},this.eventsQueue=[],this.reverseEventsDictionary={},this.highPriorityTimer&&(clearInterval(this.highPriorityTimer),this.highPriorityTimer=0),this.lowPriorityTimer&&(clearInterval(this.lowPriorityTimer),this.lowPriorityTimer=0)):this.strategy.log("Unable to flush due to not forced and not online","WARN")),this.currentlyFlushing=!1)};d.prototype.queueEvent=function(a,b){var f=this,c;void 0===b&&(b={highPriority:!0});this.eventSequence+=
1;if(1E3<this.eventSequence)return this.strategy.log("Sushi client max calls reached","WARN"),!1;if(!a||Array.isArray(a)||"object"!==typeof a)return this.strategy.log("Invalid data passed to SushiClient queueEvent","WARN"),!1;a.timestamp=this.getCurrentIsoString();a.sequence=this.eventSequence;a.messageId=[null!==(c=a.request_id)&&void 0!==c?c:"undefined",Date.now?Date.now():(new Date).getTime(),this.eventSequence].join("-");try{var e=JSON.stringify(a)}catch(h){return this.strategy.log(h instanceof
Error?h:"unable to stringify event data!","ERROR"),!1}c=e.length;(499===this.eventsQueue.length||524288<this.batchSize+c)&&this.flush(!0);this.batchSize+=c;a={data:this.compressData(a)};this.eventsQueue.push(a);b.highPriority?0===this.highPriorityFlushInterval?this.flush():this.highPriorityTimer||(this.highPriorityTimer=setTimeout(function(){return f.flush()},this.highPriorityFlushInterval,this,!1)):this.lowPriorityTimer||(this.lowPriorityTimer=setTimeout(function(){return f.flush()},this.lowPriorityFlushInterval,
this,!1));return!0};d.prototype.beforeUnload=function(){this.flush()};d.prototype.compressData=function(a){var b=this;if(!a||!this.isEncodable(a))return a;if(Array.isArray(a))return a.map(function(c){return b.compressData(c)});if("object"===typeof a){var f={};Object.entries(a).forEach(function(c){var e=c[0];c=c[1];f[b.encodeValue(e)]=["messageId","timestamp"].includes(e)?c:b.compressData(c)});return f}switch(typeof a){case "number":case "string":case "symbol":return this.encodeValue(a);default:return this.encodeValue("".concat(a))}};
d.prototype.isEncodable=function(a){if(!a||"function"===typeof a)return!1;switch(typeof a){case "boolean":return!1;case "number":return this.isEncodableNumber(a);case "string":return this.isEncodableString(a);default:return!0}};d.prototype.isEncodableNumber=function(a){return!(isNaN(a)||Infinity===a)&&this.isEncodableString(a.toString())};d.prototype.isEncodableString=function(a){return a.length>("#"+this.dictionaryIndex).length||"#"===a.charAt(0)};d.prototype.encodeValue=function(a){if(this.eventsDictionary[a])return this.eventsDictionary[a];
this.dictionaryIndex+=1;var b="".concat("#").concat(this.dictionaryIndex);this.eventsDictionary[a]=b;this.reverseEventsDictionary[b]=a;return b};d.prototype.getCurrentIsoString=function(){var a=new Date;try{return a.toISOString()}catch(b){return"".concat(a.getFullYear(),"-").concat("".concat(a.getMonth()+1).padStart(2,"0"),"-").concat("".concat(a.getDate()).padStart(2,"0"),"T").concat("".concat(a.getUTCHours()).padStart(2,"0"),":").concat(a.getUTCMinutes(),":").concat(a.getUTCSeconds(),".").concat(String((a.getUTCMilliseconds()/
1E3).toFixed(3)).slice(2,5),"Z")}};d.prototype.send=function(a){var b;if(!a||"string"!==typeof a)throw Error('invalid payload "'.concat(a,'"!'));var f=this.strategy.getWindow();if(!((null===(b=f.navigator)||void 0===b?0:b.sendBeacon)&&f.navigator.sendBeacon(this.endpoint,a))){if(f.XDomainRequest)b=new f.XDomainRequest,b.onerror=function(){},b.ontimeout=function(){},b.onprogress=function(){},b.onload=function(){},b.timeout=0;else if(f.XMLHttpRequest){if(b=new f.XMLHttpRequest,!("withCredentials"in
b))throw Error("request missing withCredentials!");}else throw Error("unable to construct AJAX request due to no XDomainRequest or XMLHttpRequest!");b.open("POST",this.endpoint,!0);b.setRequestHeader&&b.setRequestHeader("Content-Type","text/plain");b.send(a)}};return d}(),sd=function(){var d=function(a,b){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(f[e]=c[e])};return d(a,b)};return function(a,
b){function f(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)}}(),fa=function(){fa=Object.assign||function(d){for(var a,b=1,f=arguments.length;b<f;b++){a=arguments[b];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c])}return d};return fa.apply(this,arguments)},Ta=function(d,a,b,f){function c(e){return e instanceof
b?e:new b(function(h){h(e)})}return new (b||(b=Promise))(function(e,h){function g(l){try{k(f.next(l))}catch(n){h(n)}}function m(l){try{k(f["throw"](l))}catch(n){h(n)}}function k(l){l.done?e(l.value):c(l.value).then(g,m)}k((f=f.apply(d,a||[])).next())})},Ua=function(d,a){function b(k){return function(l){return f([k,l])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;m&&(m=0,k[0]&&(c=0)),c;)try{if(e=1,h&&(g=k[0]&2?h["return"]:k[0]?h["throw"]||((g=h["return"])&&g.call(h),
0):h.next)&&!(g=g.call(h,k[1])).done)return g;if(h=0,g)k=[k[0]&2,g.value];switch(k[0]){case 0:case 1:g=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;h=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys,g=0<g.length&&g[g.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!g||k[1]>g[0]&&k[1]<g[3]))c.label=k[1];else if(6===k[0]&&c.label<g[1])c.label=g[1],g=k;else if(g&&c.label<g[2])c.label=g[2],c.ops.push(k);else{g[2]&&c.ops.pop();c.trys.pop();
continue}}k=a.call(d,c)}catch(l){k=[6,l],h=0}finally{e=g=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,h,g,m=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return m.next=b(0),m["throw"]=b(1),m["return"]=b(2),"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m},td={shouldLogViewMetrics:!1},Gb=function(d){function a(b){var f,c,e,h=d.call(this)||this;h.metricsSequenceNumber=
0;h.strategy=b.strategy;h.instrumentationPixelUrl=null!==(f=b.instrumentationPixelUrl)&&void 0!==f?f:"";h.metricsOptions=fa(fa({},td),b.metricsOptions);h.defaultAttributes=Object.assign({},h.getDefaultAttributes());h.getDeviceMetrics();if(b.sushiClient)h.sushiClient=b.sushiClient;else{var g;b=h.strategy;var m;f=null===(m=b.getElement('[data-attributelevel="CAMPAIGN"]'))||void 0===m?void 0:m.getAttribute("data-marketplaceid");if(!f)throw Error("unable to get marketplace!");a:switch(f){case "ATVPDKIKX0DER":case "A2EUQ1WTGCTBG2":case "A1AM78C64UM0Y8":case "A3P3J5A7D2ZVXI":case "A2Q3Y263D00KWC":case "AZXD3QD5B39HD":case "A1ZXRLSQW2V54D":case "A1NOHO22DE3OHQ":case "A2WDZJZ5TCRMLH":case "A2IDBVIE7EAGN4":m=
"NA";break a;case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "ARBP9OOSHTCHU":case "AUJPM9XGFJRC7":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":case "A1805IZSGTT6HS":case "A1M3WC0SJ3A38T":case "A2VIGQ35RCS4UG":case "A34GYYCZVDBSIK":case "A17E79C6D8DWNP":case "A1MQPSGJ6U9Q54":case "A33AVAJ2PDY3EV":case "A3CQBQD3RGPJR8":case "A1C3SOZRARQ6R3":case "AKY4K4WKH21YQ":case "A2NODRKZP88ZB9":case "AT614YYYNOC1S":case "AMEN7PMS3EDWL":case "A1YFOMBPFBRY22":case "A3OCL2LJ6GDH9T":case "A3PJZM0QIA8QDU":case "AE08WJ6YKNBMC":case "A3TFQ1G9L8TQ5L":case "A28R8C7NBKEWEA":case "AQGJ466SKA0F0":m=
"EU";break a;case "A1VC38T7YXB528":case "A39IBJ37TRP1C6":case "A1RNPCQ4K8U27I":case "A19VAU5U5O7RUS":case "A1DQ6JV7I20JSG":case "AD2EMQ3L3PG8S":case "A38NPJYVS5YHNH":case "AAHKV2X7AFYLW":m="FE";break a;default:throw Error();}b=null===(g=b.getWindow().location)||void 0===g?void 0:g.hostname;g=["localhost","mix.corp.amazon.com","development.amazon.com"].includes(b)||/^[a-z]{2}-development\.amazon\.com$/.test(b)?"beta":/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(b)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(b)||
/^[a-z]{2}-pre-prod\.amazon\.com$/.test(b)?"gamma":"prod";g="https://unagi-".concat(m.toLowerCase(),".amazon.com/1/events/com.amazon.eel.sbv.client.").concat(g,".").concat("NA"===m?"events":m.toLowerCase());h.sushiClient=new rd({endpoint:g,strategy:h.strategy})}if(h.metricsOptions.shouldLogViewMetrics){h.instrumentationPixelUrl||(h.instrumentationPixelUrl=null!==(e=null===(c=h.strategy.getElement("[data-instrumentationpixelurl]"))||void 0===c?void 0:c.dataset.instrumentationpixelurl)&&void 0!==e?
e:"");if(!h.instrumentationPixelUrl)throw Error("No instrumentation pixel url found for view metrics");h.instrumentationPixelUrl=h.instrumentationPixelUrl.endsWith("/")?h.instrumentationPixelUrl.concat("v/"):h.instrumentationPixelUrl.concat("/v/")}return h}sd(a,d);a.prototype.logEvent=function(b,f){return Ta(this,void 0,void 0,function(){var c,e,h,g;return Ua(this,function(m){this.metricsSequenceNumber+=1;c=null===(g=null===(h=this.strategy.getWindow().navigator)||void 0===h?void 0:h.connection)||
void 0===g?void 0:g.type;e=fa(fa(fa(fa({},this.strategy.getWidgetDimensions()),this.defaultAttributes),null!==f&&void 0!==f?f:{}),{eventType:b,metricsSequenceNumber:this.metricsSequenceNumber,networkType:c});this.sushiClient.queueEvent(e);return[2]})})};a.prototype.logViewMetric=function(b,f){return Ta(this,void 0,void 0,function(){var c,e,h,g,m;return Ua(this,function(k){switch(k.label){case 0:if(!this.metricsOptions.shouldLogViewMetrics)return this.strategy.log("View metrics logging is disabled, skipping logging for event ".concat(b),
"WARN"),[2];c=JSON.stringify(f);k.label=1;case 1:k.trys.push([1,3,,4]);e=this.instrumentationPixelUrl+encodeURI(c);if(!e)throw this.logEvent(r.VIDEO_VM_POST_FAILURE,{viewMetricsFailure:b}),Error("No url found for view metrics post");return[4,fetch(e,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:c}).then(function(l){if(!l.ok&&0!==l.status)throw Error(l.status+" "+l.statusText);})];case 2:return k.sent(),[3,4];case 3:return h=k.sent(),this.logEvent(r.VIDEO_VM_POST_FAILURE,
{viewMetricsFailure:b,errorMessage:null!==(g=h.message)&&void 0!==g?g:String(h)}),this.strategy.log("view metrics post failure: ".concat(null!==(m=h.message)&&void 0!==m?m:String(h)),"ERROR"),[3,4];case 4:return[2]}})})};a.prototype.getDeviceMetrics=function(){return Ta(this,void 0,void 0,function(){var b=this;return Ua(this,function(f){return ha(this.strategy)?[2,new Promise(function(c){P.when("A").execute(function(e){b.defaultAttributes.deviceEnv=e.capabilities.isAmazonApp?"app":"web";b.defaultAttributes.deviceType=
e.capabilities.mobile?"mobile":e.capabilities.tablet?"tablet":"desktop";b.defaultAttributes.deviceOs="unrecognized";"desktop"!==b.defaultAttributes.deviceType&&(b.defaultAttributes.deviceOs=e.capabilities.android?"android":e.capabilities.ios?"ios":b.defaultAttributes.deviceOs,"unrecognized"===b.defaultAttributes.deviceOs&&["motorola edge","Moto"].forEach(function(h){navigator.userAgent.includes(h)&&(b.defaultAttributes.deviceOs="android")}));c()})})]:[2]})})};a.prototype.getDefaultAttributes=function(){var b=
this.strategy.getElement('[data-attributelevel="CAMPAIGN"]');if(b){var f=b.dataset;b=f.clientid;var c=f.language,e=f.marketplaceid,h=f.pagenumber,g=f.pagetype,m=f.requestid,k=f.searchquery,l=f.stage,n=f.templatename,p=f.videoorientation,t=f.weblabs,q=f.widgetgroupid;f=f.widgettype;return{deviceEnv:"",deviceOs:"",deviceType:"",clientId:void 0===b?"":b,language:void 0===c?"":c,marketplaceId:void 0===e?"":e,pageNumber:void 0===h?"":h,pageType:void 0===g?"":g,requestId:void 0===m?"":m,searchQuery:void 0===
k?"":k,stage:void 0===l?"":l,templateName:void 0===n?"":n,videoOrientation:void 0===p?"":p,weblabs:void 0===t?"":t,widgetGroupId:void 0===q?"":q,widgetType:void 0===f?"":f}}};return a}(Fb),O=function(){O=Object.assign||function(d){for(var a,b=1,f=arguments.length;b<f;b++){a=arguments[b];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c])}return d};return O.apply(this,arguments)},ud=function(d,a,b,f){function c(e){return e instanceof b?e:new b(function(h){h(e)})}return new (b||(b=
Promise))(function(e,h){function g(l){try{k(f.next(l))}catch(n){h(n)}}function m(l){try{k(f["throw"](l))}catch(n){h(n)}}function k(l){l.done?e(l.value):c(l.value).then(g,m)}k((f=f.apply(d,a||[])).next())})},vd=function(d,a){function b(k){return function(l){return f([k,l])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;m&&(m=0,k[0]&&(c=0)),c;)try{if(e=1,h&&(g=k[0]&2?h["return"]:k[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,k[1])).done)return g;
if(h=0,g)k=[k[0]&2,g.value];switch(k[0]){case 0:case 1:g=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;h=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys,g=0<g.length&&g[g.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!g||k[1]>g[0]&&k[1]<g[3]))c.label=k[1];else if(6===k[0]&&c.label<g[1])c.label=g[1],g=k;else if(g&&c.label<g[2])c.label=g[2],c.ops.push(k);else{g[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(d,c)}catch(l){k=
[6,l],h=0}finally{e=g=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,h,g,m=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return m.next=b(0),m["throw"]=b(1),m["return"]=b(2),"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m},wd=function(d,a,b){if(b||2===arguments.length)for(var f=0,c=a.length,e;f<c;f++)!e&&f in a||(e||(e=Array.prototype.slice.call(a,0,
f)),e[f]=a[f]);return d.concat(e||Array.prototype.slice.call(a))},ba,ca,xd=(ba={},ba[r.VIDEO_VIEWED]=!1,ba[r.VIDEO_PROGRESS_FIVE_SECONDS]=!1,ba[r.VIDEO_FIRST_QUARTILE]=!1,ba[r.VIDEO_MIDPOINT]=!1,ba[r.VIDEO_THIRD_QUARTILE]=!1,ba[r.VIDEO_COMPLETE]=!1,ba[r.VIDEO_UNMUTE]=!1,ba),Hb=(ca={},ca[r.VIDEO_VIEWED]=r.VIDEO_VM_AD_UNIT_VIEWED,ca[r.VIDEO_PROGRESS_FIVE_SECONDS]=r.VIDEO_VM_PROGRESS_FIVE_SECONDS,ca[r.VIDEO_FIRST_QUARTILE]=r.VIDEO_VM_FIRST_QUARTILE,ca[r.VIDEO_MIDPOINT]=r.VIDEO_VM_MIDPOINT,ca[r.VIDEO_THIRD_QUARTILE]=
r.VIDEO_VM_THIRD_QUARTILE,ca[r.VIDEO_COMPLETE]=r.VIDEO_VM_COMPLETE,ca[r.VIDEO_UNMUTE]=r.VIDEO_VM_UNMUTE,ca),yd=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],zd=function(){return function(d){var a=this,b,f,c;this.initializeCaptions=function(){var e,h,g=null===(e=a.videoElement.textTracks)||void 0===e?void 0:e[0];a.ccText=a._strategy.getElement('[data-daretype="ccText"]');e="true"===a.videoElement.dataset.isVerticalVideo;g&&a.ccText&&(g.mode="hidden",e?null===(h=a.videoElement.querySelector("track"))||void 0===
h?void 0:h.addEventListener("load",function(){var m=a.generateNewTextTrack(g);m&&m.addEventListener("cuechange",function(){var k=m.activeCues;k&&0<k.length&&(a.ccText.innerHTML=k[0].text)})}):g.addEventListener("cuechange",function(){var m=g.activeCues;m&&0<m.length&&(a.ccText.innerHTML=m[0].text)}))};this.videoOnCanPlayEvent=function(){if(!a.assetLoaded){var e=a.getDateTime()-a.loadStartTime;a.metricsManager.logEvent(r.VIDEO_READY_FOR_PLAYBACK,{loadTimeMs:e,retryCount:a.retryLoadCount,percentDownloaded:a.getPercentDownloaded(),
videoTotalLengthMs:a.getDurationMs()});a.assetLoaded=!0}};this.videoOnErrorEvent=function(){!a.assetLoaded&&3>a.retryLoadCount?(a.retryLoadCount++,setTimeout(a.videoElement.load.bind(a.videoElement),2E3)):a.handleVideoPlaybackFailureEvent()};this.getVideoMetricAttributes=function(){return{videoCurrentTimeMs:a.getCurrentTimeMs(),percentDownloaded:a.getPercentDownloaded(),droppedFrames:a.getDroppedFrames(),adUnitPercentageInView:a.adUnitPercentageInView}};this.handleFirstFramePlayedEvent=function(){if(!a.firstFramePlayed&&
!a.firstInterrupt&&a.initiatedPlayTime){var e=a.getDateTime()-a.initiatedPlayTime;a.metricsManager.logEvent(r.VIDEO_TIME_TO_FIRST_FRAME,{percentDownloaded:a.getPercentDownloaded(),droppedFrames:a.getDroppedFrames(),loadTimeMs:e});a.firstFramePlayed=!0;a.clientInitiatedStartTime&&(e=a.getDateTime()-a.clientInitiatedStartTime,a.metricsManager.logEvent(r.VIDEO_CLIENT_LOAD_TO_FIRST_FRAME,{percentDownloaded:a.getPercentDownloaded(),droppedFrames:a.getDroppedFrames(),loadTimeMs:e}))}};this.handleFirstInterrupt=
function(){if(!a.firstFramePlayed&&!a.firstInterrupt&&a.initiatedPlayTime){var e=a.getDateTime()-a.initiatedPlayTime;a.metricsManager.logEvent(r.VIDEO_TIME_TO_FIRST_INTERRUPT,{percentDownloaded:a.getPercentDownloaded(),droppedFrames:a.getDroppedFrames(),loadTimeMs:e});a.firstInterrupt=!0}};this.videoOnPlayingEvent=function(){a.handleFirstFramePlayedEvent();"buffering"===a.playbackState&&(a.bufferStartTimeMs=0,a.metricsManager.logEvent(r.VIDEO_BUFFERING_ENDED,O({},a.getVideoMetricAttributes())));"ended"!==
a.playbackState&&a.metricsManager.logEvent(r.VIDEO_PLAYBACK_STARTED,O({},a.getVideoMetricAttributes()));a.playbackState="playing"};this.videoOnPauseEvent=function(){a.videoElement.currentTime!==a.videoElement.duration&&(a.playbackState="paused",a.metricsManager.logEvent(r.VIDEO_PAUSED,O({},a.getVideoMetricAttributes())))};this.videoOnEndedEvent=function(){return ud(a,void 0,void 0,function(){return vd(this,function(e){switch(e.label){case 0:return this.playbackState="ended",this.ccText&&(this.ccText.innerHTML=
""),this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.metricsManager.logEvent(r.VIDEO_PLAYBACK_COMPLETED,O(O({},this.getVideoMetricAttributes()),{percentDownloaded:void 0})),this.emitViewMetric(r.VIDEO_COMPLETE),this.videoElement.dataset.disableLooping&&"false"!==this.videoElement.dataset.disableLooping?[3,2]:[4,this.playInternal()];case 1:e.sent(),e.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=function(){a.playbackState="buffering";a.bufferStartTimeMs=a.getCurrentTimeMs();
a.metricsManager.logEvent(r.VIDEO_BUFFERING_STARTED,O({},a.getVideoMetricAttributes()))};this.videoOnTimeUpdateEvent=function(){var e=a.getCurrentTimeMs(),h=a.getDurationMs(),g=a.getContinuousPlaybackDurationMs();g=a.calculateVideoDurationTotalMsRelativeToAdUnit(g);a.lastOnTimeUpdateCurrentTimeMs=e;2E3<=g&&(g={p:Math.round(a.adUnitPercentageInView),t:parseFloat((g/1E3).toFixed(3))},a.emitViewMetric(r.VIDEO_VIEWED,g));5E3<=e&&a.emitViewMetric(r.VIDEO_PROGRESS_FIVE_SECONDS);e>=.25*h&&a.emitViewMetric(r.VIDEO_FIRST_QUARTILE);
e>=.5*h&&a.emitViewMetric(r.VIDEO_MIDPOINT);e>=.75*h&&a.emitViewMetric(r.VIDEO_THIRD_QUARTILE)};this.videoOnAbortEvent=function(){a.metricsManager.logEvent(r.VIDEO_ABORTED,{videoCurrentTimeMs:a.getCurrentTimeMs()})};this.videoOnLoadStartEvent=function(){a.navBackLoadPending=!1};this.handleVideoPlaybackFailureEvent=function(){if(a.videoElement.error){var e=a.videoElement.error,h=e.message;e=a.translateVideoErrorCode(e.code);a.metricsManager.logEvent(r.VIDEO_PLAYBACK_FAILURE,{videoCurrentTimeMs:a.getCurrentTimeMs(),
errorCode:e,errorMessage:h});a._strategy.log("video playback failure: ".concat(e," ").concat(h),"ERROR")}};this.translateVideoErrorCode=function(e){switch(e){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"UNKNOWN"}};this.emitViewMetric=function(e,h){void 0===h&&(h=void 0);a.shouldLogViewMetrics&&!a.emittedViewMetrics[e]&&(h={v:O(O({},h),{def:"iab",event:e}),programType:"SBV"},Hb[e]&&a.metricsManager.logEvent(Hb[e]),
a.metricsManager.logViewMetric(e,h),a.emittedViewMetrics[e]=!0)};this.calculateVideoDurationTotalMsRelativeToAdUnit=function(e){a.isAdUnitInView()?a.videoDurationTotalMsWhenAdInViewFirst=e-a.videoDurationStartTimeMsWhenAdInViewFirst:(a.videoDurationTotalMsWhenAdInViewFirst=0,a.videoDurationStartTimeMsWhenAdInViewFirst=e);return a.videoDurationTotalMsWhenAdInViewFirst};this.isAdUnitInView=function(){return 50<=a.adUnitPercentageInView};this.pause=function(){a.firstFramePlayed||a.firstInterrupt||!a.initiatedPlayTime||
a.handleFirstInterrupt();"paused"!==a.playbackState&&"playing"===a.playbackState&&(a.playbackState="paused",a.videoElement.pause())};this.play=function(e){a.initiatedPlayTime||(a.initiatedPlayTime=e);return"playing"!==a.playbackState&&a.videoElement.paused?(e=a.playInternal())?e:Promise.reject("NotSupported"):Promise.resolve()};this.playInternal=function(){return a.videoElement.play()};this.getPercentDownloaded=function(){var e=a.videoElement.buffered;if(!e)return 0;for(var h=0,g=0;g<e.length;g++)h+=
e.end(g)-e.start(g);return h/a.videoElement.duration};this.load=function(){a.videoElement.load()};this.isNavBackLoadPending=function(){return a.navBackLoadPending};this.attachLoadStartCallback=function(e){a.videoElement.addEventListener("loadstart",function(){return e()},{once:!0})};this.mute=function(){a.videoElement.muted=!0};this.unmute=function(){a.videoElement.muted=!1};this.isMuted=function(){return a.videoElement.muted};this.getCaptionLanguage=function(){var e;return null!==(e=a.videoElement.textTracks[0].language)&&
void 0!==e?e:"No Language Given"};this.getDateTime=function(){return Date.now()};this.seekToStart=function(){a.lastOnTimeUpdateCurrentTimeMs=0;a.videoElement.currentTime=0;a.ccText&&(a.ccText.innerHTML="")};this.generateNewTextTrack=function(e){if(!e||!e.cues||0===e.cues.length)return null;var h=a.videoElement.addTextTrack("captions"),g=e.cues;e=function(k){var l=g[k];k=l.startTime;var n=l.endTime;l=l.text.trim();var p=l.split(" "),t=l.length-p.length,q=n-k,v=k,u=[];p.forEach(function(A){var B=u.join(" ");
if(32<B.length+A.length){var C=v+(B.length-u.length+1)/t*q;h.addCue(new VTTCue(v,C,B));v=C;u=[]}u.push(A)});0<u.length&&h.addCue(new VTTCue(v,n,u.join(" ")))};for(var m=0;m<g.length;m++)e(m);h.mode="hidden";return h};this.getCurrentTimeMs=function(){return Math.round(1E3*a.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*a.videoElement.duration)};this.getDroppedFrames=function(){return a.videoElement.getVideoPlaybackQuality?a.videoElement.getVideoPlaybackQuality().droppedVideoFrames:
void 0!==a.videoElement.webkitDroppedFrameCount?a.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return a.continuousDurationAccruedPlayTimeMs+(a.getCurrentTimeMs()-a.continuousDurationStartTimeMs)};this.setAdUnitViewabilityPercentage=function(e){void 0===e&&(e=0);a.adUnitPercentageInView=e};this.resetContinuousPlaybackDurationMs=function(){var e=a.getCurrentTimeMs();a.continuousDurationAccruedPlayTimeMs=0;e===a.getDurationMs()?a.continuousDurationStartTimeMs=
0:a.continuousDurationStartTimeMs=e};this.accrueContinuousPlaybackDuration=function(e){a.continuousDurationAccruedPlayTimeMs+=e-a.continuousDurationStartTimeMs;a.continuousDurationStartTimeMs=0};this.hasSrcAttr=function(){return a.videoElement.hasAttribute("src")};this.loadVideoOnBrowserVisible=function(){var e=a.videoElement.dataset.videoSource;!a.videoElement.src&&e&&(a.videoElement.src=e,a.navBackLoadPending=!0,a.load(),a.metricsManager.logEvent(r.VIDEO_LOADED_ON_BROWSER_VISIBLE))};this.clear=
function(){a.videoElement.dataset.videoSource=a.videoElement.src;a.videoElement.removeAttribute("src");a.load();a.metricsManager.logEvent(r.VIDEO_CLEARED_ON_BROWSER_HIDDEN)};this._strategy=d.strategy;this.videoElement=d.el;this.metricsOptions=d.metricsOptions;this.clientInitiatedStartTime=d.clientInitiatedStartTime;this.clientExecutionMode=d.clientExecutionMode;this.shouldLogViewMetrics=null!==(f=null===(b=d.metricsOptions)||void 0===b?void 0:b.shouldLogViewMetrics)&&void 0!==f?f:!1;this.ccText=null;
this.firstInterrupt=!1;this.metricsManager=null!==(c=this._strategy.metricsManager)&&void 0!==c?c:new Gb({strategy:this._strategy,metricsOptions:this.metricsOptions});this.metricsManager.logEvent(r.ACE_VIDEO_RESPONSE_RECEIVED,{numberOfAds:1,clientExecutionMode:this.clientExecutionMode});this.emittedViewMetrics=O({},xd);this.playbackState="initiated";this.loadStartTime=this.getDateTime();this.navBackLoadPending=this.firstFramePlayed=this.assetLoaded=!1;this.videoDurationStartTimeMsWhenAdInViewFirst=
this.videoDurationTotalMsWhenAdInViewFirst=this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=this.bufferStartTimeMs=this.adUnitPercentageInView=this.retryLoadCount=0;this.videoElement.oncanplay=this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=
this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=this.videoOnAbortEvent;this.videoElement.onloadstart=this.videoOnLoadStartEvent;4===this.videoElement.readyState&&(this.metricsManager.logEvent(r.VIDEO_READY_FOR_PLAYBACK,{loadTimeMs:0,retryCount:0,percentDownloaded:this.getPercentDownloaded(),videoTotalLengthMs:this.getDurationMs()}),this.assetLoaded=!0);this.initializeCaptions()}}(),gc=function(){return function(d){var a=this,b,f;this.init=
function(){var c,e,h;a.videoElement=a._strategy.getElement("video",a._root);a.adUnitElement=a._strategy.getElement();if(!a.videoElement)throw Error("unable to find video element");if(!a.adUnitElement)throw Error("unable to find ad unit element");if(!(a.videoElement instanceof HTMLVideoElement))throw Error("video element is not an HTMLVideoElement");if(!(a.adUnitElement instanceof HTMLElement))throw Error("Ad unit element is not an HTMLElement");a._videoPlayer=new zd({el:a.videoElement,strategy:a._strategy,
clientInitiatedStartTime:a._clientInitiatedStartTime,clientExecutionMode:a._clientExecutionMode,metricsOptions:a.metricsOptions});a.videoLink=null!==(c=a._strategy.getElement('[data-daretype="video-background-link"]'))&&void 0!==c?c:null;a.muteButton=a._strategy.getElement('[data-daretype="MUTE"]',a._root);a.muteButton&&(a.muteButtonIcon=a.muteButton.querySelector('[data-daretype="toggleOff"]'),a.unmuteButtonIcon=a.muteButton.querySelector('[data-daretype="toggleOn"]'),a.setMuteButtonState(a._videoPlayer.isMuted()),
a.setupMuteButtonEvents(),a.isMuted=a._videoPlayer.isMuted(),a.isMuted||a.toggleAudio(!0));a.ccTrackFail=!1;a.ccTrack=a._strategy.getElement('[data-daretype="ccTrack"]');a.ccTrack&&(a.ccTrack.onerror=a.ccLoadFailure);a.ccContainer=a._strategy.getElement('[data-daretype="ccContainer"]');a.ccButton=a._strategy.getElement('[data-daretype="CAPTION"]');a.ccButton&&(a.ccButtonOff=a.ccButton.querySelector('[data-daretype="toggleOff"]'),a.ccButtonOn=a.ccButton.querySelector('[data-daretype="toggleOn"]'),
a.setupCcButtonEvents(),a.toggleCC(!1,"DefaultOff"));a.playButtonContainer=a._strategy.getElement('[data-daretype="PLAY-CONTAINER"]',a._root);a.playButton=null!==(h=null===(e=a.playButtonContainer)||void 0===e?void 0:e.querySelector("button"))&&void 0!==h?h:null;a.pauseButton=a._strategy.getElement('[data-daretype="PAUSE"]',a._root);if(!a.playButtonContainer||!a.pauseButton)throw Error("unable to find play button container or pause button");a.ccButton=a._strategy.getElement('[data-daretype="CAPTION"]',
a._root);a.setUpPlayButtonEvents();a.setUpPauseButtonEvents();a.setupVideoClickEvent();a.isAutoPlayDisabled&&(a._videoPlayer.metricsManager.logEvent(r.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED),a.showPlayButton(!0),a.showPauseButton(!1),a.showMuteButton(!1));a.setupViewabilityEvents()};this.setupViewabilityEvents=function(){if(a.videoElement)if(a.adUnitElement){a.videoObserver=a._strategy.createIntersectionObserver(function(e){e=e[0];if(e.isIntersecting)a.handleViewabilityState(e.intersectionRatio);else a.onOnePercentViewabilityChange(!1)},
{threshold:[.01,.5]});a.adUnitObserver=a._strategy.createIntersectionObserver(function(e){a.adUnitInView=Math.round(100*e[0].intersectionRatio);a.updateVideoPlayerWithAdUnitViewability(a.adUnitInView)},{threshold:wd([],yd,!0)});a.videoObserver.observe(a.videoElement);a.adUnitObserver.observe(a.adUnitElement);var c=a._strategy.getWindow();c.addEventListener("visibilitychange",function(){var e,h,g,m,k,l;a.videoElement&&a.adUnitElement&&(document.hidden?(null===(e=a.videoObserver)||void 0===e?void 0:
e.unobserve(a.videoElement),null===(h=a.adUnitObserver)||void 0===h?void 0:h.unobserve(a.adUnitElement),a.adUnitInView=0,a.handleViewabilityState(0),null===(g=a._videoPlayer)||void 0===g?void 0:g.clear()):(null===(m=a._videoPlayer)||void 0===m?void 0:m.loadVideoOnBrowserVisible(),null===(k=a.videoObserver)||void 0===k?void 0:k.observe(a.videoElement),null===(l=a.adUnitObserver)||void 0===l?void 0:l.observe(a.adUnitElement)))});c.addEventListener("blur",function(){var e,h;a.videoElement&&a.adUnitElement&&
(null===(e=a.videoObserver)||void 0===e?void 0:e.unobserve(a.videoElement),null===(h=a.adUnitObserver)||void 0===h?void 0:h.unobserve(a.adUnitElement),a.adUnitInView=0,a.handleViewabilityState(0))});c.addEventListener("focus",function(){var e,h;a.videoElement&&a.adUnitElement&&(null===(e=a.videoObserver)||void 0===e?void 0:e.observe(a.videoElement),null===(h=a.adUnitObserver)||void 0===h?void 0:h.observe(a.adUnitElement))})}else a._strategy.log("Cant setup viewability events: ad unit element not found",
"ERROR");else a._strategy.log("Cant setup viewability events: video element not found","ERROR")};this.updateVideoPlayerWithAdUnitViewability=function(c){var e;null===(e=a._videoPlayer)||void 0===e?void 0:e.setAdUnitViewabilityPercentage(c)};this.onOnePercentViewabilityChange=function(c){var e,h,g,m,k,l,n,p=Date.now();c?(a.onScreenStartTime=p,null===(e=a._videoPlayer)||void 0===e?void 0:e.metricsManager.logEvent(r.VIDEO_ON_SCREEN,{percentDownloaded:a._videoPlayer.getPercentDownloaded()})):((null===
(h=a._videoPlayer)||void 0===h?0:h.isMuted())||a.setMuteStatus(!0,"VideoOffScreen"),c=p-a.onScreenStartTime,null===(g=a._videoPlayer)||void 0===g?void 0:g.metricsManager.logEvent(r.VIDEO_OFF_SCREEN,{timeOnScreenMs:c,wasBuffering:0!==(null===(m=a._videoPlayer)||void 0===m?void 0:m.bufferStartTimeMs),videoCurrentTimeMs:null===(k=a._videoPlayer)||void 0===k?void 0:k.getCurrentTimeMs()}),a.onScreenStartTime=0,null===(l=a._videoPlayer)||void 0===l?void 0:l.seekToStart(),null===(n=a._videoPlayer)||void 0===
n?void 0:n.resetContinuousPlaybackDurationMs(),a.adUnitPercentageInView=!1)};this.onFiftyPercentViewabilityChange=function(c,e){a.isAutoPlayDisabled&&!a.playButtonClicked||a.pauseButtonClicked||(c?a.play():a.pause(e))};this.handleViewabilityState=function(c){if(0===c)a.onFiftyPercentViewabilityChange(!1,void 0),a.onOnePercentViewabilityChange(!1);else if(.5<=c)a.onFiftyPercentViewabilityChange(!0,void 0);else if(.5>c&&.01<=c)a.onFiftyPercentViewabilityChange(!1,void 0);else a.onOnePercentViewabilityChange(!1)};
this.load=function(){var c;null===(c=a._videoPlayer)||void 0===c?void 0:c.load()};this.play=function(){var c,e,h,g,m,k,l;if(a.isPlaying())return Promise.resolve();null!==(c=a._videoPlayer)&&void 0!==c&&c.hasSrcAttr()||(null===(e=a._videoPlayer)||void 0===e?void 0:e.loadVideoOnBrowserVisible());null===(h=a._videoPlayer)||void 0===h?void 0:h.resetContinuousPlaybackDurationMs();null===(g=a._videoPlayer)||void 0===g?void 0:g.metricsManager.logEvent(r.VIDEO_PLAYBACK_INITIATED,{videoCurrentTimeMs:a._videoPlayer.getCurrentTimeMs()});
a.isPausedByUser=!1;a.showPlayButton(!1);a.showPauseButton(!0);a.muteButton&&(a.muteButton.style.display="block",a.muteButton.style.visibility="visible");a.pauseButton&&(a.pauseButton.style.display="block",a.pauseButton.style.visibility="visible");return(null===(m=a._videoPlayer)||void 0===m?0:m.isNavBackLoadPending())?(null===(k=a._videoPlayer)||void 0===k?void 0:k.attachLoadStartCallback(function(){return a.play()}),Promise.resolve()):null===(l=a._videoPlayer)||void 0===l?void 0:l.play(Date.now()).then().catch(function(n){var p,
t="string"===typeof n?n:"";n instanceof DOMException&&(t=n.name+": "+n.message);a.showPlayButton(!0);a.showPauseButton(!1);a.muteButton&&(a.muteButton.style.visibility="hidden");a.ccButton&&(a.ccButton.style.visibility="hidden");a._strategy.log(t,"ERROR");null===(p=a._videoPlayer)||void 0===p?void 0:p.metricsManager.logEvent(r.VIDEO_PLAY_PROMISE_REJECTED,{errorMessage:t})})};this.pause=function(c){var e,h;void 0===c&&(c=!1);a.isPaused()||(null===(e=a._videoPlayer)||void 0===e?void 0:e.resetContinuousPlaybackDurationMs(),
a.showPauseButton(!1),c||a.showPlayButton(!0),a.muteButton&&(a.muteButton.style.visibility="hidden"),null===(h=a._videoPlayer)||void 0===h?void 0:h.pause())};this.isPaused=function(){var c;return"paused"===(null===(c=a._videoPlayer)||void 0===c?void 0:c.playbackState)};this.isPlaying=function(){var c;return"playing"===(null===(c=a._videoPlayer)||void 0===c?void 0:c.playbackState)};this.setMuteStatus=function(c,e){var h,g,m,k,l;a.isMuted=c;a.setMuteButtonState(c);c?(null===(h=a._videoPlayer)||void 0===
h?void 0:h.mute(),null===(g=a._videoPlayer)||void 0===g?void 0:g.metricsManager.logEvent(r.VIDEO_SOUND_OFF,{videoCurrentTimeMs:a._videoPlayer.getCurrentTimeMs(),soundToggleMethod:e})):(null===(m=a._videoPlayer)||void 0===m?void 0:m.unmute(),null===(k=a._videoPlayer)||void 0===k?void 0:k.metricsManager.logEvent(r.VIDEO_SOUND_ON,{videoCurrentTimeMs:a._videoPlayer.getCurrentTimeMs(),soundToggleMethod:e}),null===(l=a._videoPlayer)||void 0===l?void 0:l.emitViewMetric(r.VIDEO_UNMUTE))};this.toggleAudio=
function(c){var e,h,g;void 0===c&&(c=null);var m="true"===(null===(e=a.muteButton)||void 0===e?void 0:e.getAttribute("aria-pressed"));null===(h=a.muteButton)||void 0===h?void 0:h.setAttribute("aria-pressed",!m+"");a.setMuteStatus(null!==c&&void 0!==c?c:!(null===(g=a._videoPlayer)||void 0===g?0:g.isMuted()),"IconTap")};this.toggleCC=function(c,e){var h,g,m,k,l;void 0===c&&(c=void 0);void 0===e&&(e=void 0);a.ccShowing=null!==c&&void 0!==c?c:!a.ccShowing;c=null!==e&&void 0!==e?e:"IconTap";a.ccButtonOff&&
a.ccButtonOn&&(a.ccShowing?(a.ccButtonOn.style.opacity="1",a.ccButtonOff.style.opacity="0",null===(h=a._videoPlayer)||void 0===h?void 0:h.metricsManager.logEvent(r.VIDEO_CAPTIONS_ENABLED,{language:null===(g=a._videoPlayer)||void 0===g?void 0:g.getCaptionLanguage(),ccToggleCause:c})):(a.ccButtonOn.style.opacity="0",a.ccButtonOff.style.opacity="1",null===(m=a._videoPlayer)||void 0===m?void 0:m.metricsManager.logEvent(r.VIDEO_CAPTIONS_DISABLED,{language:null===(k=a._videoPlayer)||void 0===k?void 0:k.getCaptionLanguage(),
ccToggleCause:c})));a.ccContainer&&(a.ccContainer.style.visibility=a.ccShowing?"visible":"hidden");null===(l=a.ccButton)||void 0===l?void 0:l.setAttribute("aria-pressed","".concat(a.ccShowing))};this.setMuteButtonState=function(c){a.muteButtonIcon&&a.unmuteButtonIcon&&(c?(a.unmuteButtonIcon.style.opacity="0",a.muteButtonIcon.style.opacity="1"):(a.muteButtonIcon.style.opacity="0",a.unmuteButtonIcon.style.opacity="1"))};this.showPlayButton=function(c){a.playButtonContainer&&(a.playButtonContainer.style.visibility=
c?"inherit":"hidden")};this.showPauseButton=function(c){a.pauseButton&&(a.pauseButton.style.visibility=c?"inherit":"hidden")};this.showMuteButton=function(c){a.muteButton&&(a.muteButton.style.visibility=c?"inherit":"hidden")};this.showCcButton=function(c){a.ccButton&&(a.ccButton.style.visibility=c?"inherit":"hidden")};this.setupCcButtonEvents=function(){a.ccButton&&a.ccButton.addEventListener("click",function(){a.toggleCC()})};this.ccLoadFailure=function(){a.ccTrackFail=!0;a.ccButton&&(a.ccButton.style.visibility=
"hidden")};this.setupMuteButtonEvents=function(){a.muteButton&&a.muteButton.addEventListener("click",function(){a.toggleAudio()})};this.setUpPlayButtonEvents=function(){a.playButtonContainer&&a.playButtonContainer.addEventListener("click",a.playButtonClickHandler)};this.playButtonClickHandler=function(){var c;a.play();a.playButtonClicked=!0;a.pauseButtonClicked=!1;null===(c=a.pauseButton)||void 0===c?void 0:c.focus()};this.setUpPauseButtonEvents=function(){a.pauseButton&&a.pauseButton.addEventListener("click",
a.pauseButtonClickHandler)};this.setupVideoClickEvent=function(){a.videoLink&&a.videoLink.addEventListener("click",function(){var c,e;null===(c=a._videoPlayer)||void 0===c?void 0:c.metricsManager.logEvent(r.VIDEO_CLICKED,O(O({},bb(cb.VIDEO,a._strategy,null!==(e=a.videoLink)&&void 0!==e?e:void 0)),{videoCurrentTimeMs:a._videoPlayer.getCurrentTimeMs()}))})};this.pauseButtonClickHandler=function(){var c;a.pause();a.pauseButtonClicked=!0;a.playButtonClicked=!1;null===(c=a.playButton)||void 0===c?void 0:
c.focus()};this._root=d.el;this._strategy=d.strategy;this.isAutoPlayDisabled=null!==(b=d.isAutoPlayDisabled)&&void 0!==b?b:!1;this._clientInitiatedStartTime=d.clientInitiatedStartTime;this._clientExecutionMode=null!==(f=d.clientExecutionMode)&&void 0!==f?f:"AF";this.metricsOptions=d.metricsOptions;this._videoPlayer;this.videoElement;this.adUnitElement;this.onScreenStartTime=Date.now();this.init()}}(),Ad=function(){var d=function(a,b){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,
c){f.__proto__=c}||function(f,c){for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(f[e]=c[e])};return d(a,b)};return function(a,b){function f(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)}}(),ic=function(d,a,b,f){function c(e){return e instanceof b?e:new b(function(h){h(e)})}return new (b||(b=Promise))(function(e,h){function g(l){try{k(f.next(l))}catch(n){h(n)}}
function m(l){try{k(f["throw"](l))}catch(n){h(n)}}function k(l){l.done?e(l.value):c(l.value).then(g,m)}k((f=f.apply(d,a||[])).next())})},jc=function(d,a){function b(k){return function(l){return f([k,l])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;m&&(m=0,k[0]&&(c=0)),c;)try{if(e=1,h&&(g=k[0]&2?h["return"]:k[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,k[1])).done)return g;if(h=0,g)k=[k[0]&2,g.value];switch(k[0]){case 0:case 1:g=k;break;case 4:return c.label++,
{value:k[1],done:!1};case 5:c.label++;h=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys,g=0<g.length&&g[g.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!g||k[1]>g[0]&&k[1]<g[3]))c.label=k[1];else if(6===k[0]&&c.label<g[1])c.label=g[1],g=k;else if(g&&c.label<g[2])c.label=g[2],c.ops.push(k);else{g[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(d,c)}catch(l){k=[6,l],h=0}finally{e=g=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c=
{label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,h,g,m=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return m.next=b(0),m["throw"]=b(1),m["return"]=b(2),"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m},fb=function(d){function a(b){var f,c,e,h,g=d.call(this,b)||this;g._root.addEventListener("darecarouselmoveto",function(){g.updateItems()});null===(f=g._pausePlayButton)||void 0===f?void 0:f.removeAttribute("disabled");
null===(c=g._nextButton)||void 0===c?void 0:c.removeAttribute("disabled");null===(e=g._previousButton)||void 0===e?void 0:e.removeAttribute("disabled");null===(h=g._indicators)||void 0===h?void 0:h.forEach(function(m){m.removeAttribute("disabled");(m=g._strategy.getElement('[data-dare="CarouselIndicatorInternal"]',m))&&m.addEventListener("animationend",function(){g.next();g.updateItems()})});return g}Ad(a,d);a.prototype.updateItems=function(){var b=this,f;null===(f=this._indicators)||void 0===f?void 0:
f.forEach(function(c,e){e<b._activeIndex?c.setAttribute("data-done","true"):c.removeAttribute("data-done")})};return a}(eb),Bd=function(){var d=function(a,b){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(f[e]=c[e])};return d(a,b)};return function(a,b){function f(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");
d(a,b);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)}}(),Va=function(){Va=Object.assign||function(d){for(var a,b=1,f=arguments.length;b<f;b++){a=arguments[b];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c])}return d};return Va.apply(this,arguments)},Cd=function(d,a,b,f){function c(e){return e instanceof b?e:new b(function(h){h(e)})}return new (b||(b=Promise))(function(e,h){function g(l){try{k(f.next(l))}catch(n){h(n)}}function m(l){try{k(f["throw"](l))}catch(n){h(n)}}
function k(l){l.done?e(l.value):c(l.value).then(g,m)}k((f=f.apply(d,a||[])).next())})},Dd=function(d,a){function b(k){return function(l){return f([k,l])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;m&&(m=0,k[0]&&(c=0)),c;)try{if(e=1,h&&(g=k[0]&2?h["return"]:k[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,k[1])).done)return g;if(h=0,g)k=[k[0]&2,g.value];switch(k[0]){case 0:case 1:g=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;
h=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys,g=0<g.length&&g[g.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!g||k[1]>g[0]&&k[1]<g[3]))c.label=k[1];else if(6===k[0]&&c.label<g[1])c.label=g[1],g=k;else if(g&&c.label<g[2])c.label=g[2],c.ops.push(k);else{g[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(d,c)}catch(l){k=[6,l],h=0}finally{e=g=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(g[0]&1)throw g[1];
return g[1]},trys:[],ops:[]},e,h,g,m=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return m.next=b(0),m["throw"]=b(1),m["return"]=b(2),"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m},Ed=function(d){function a(b){var f=d.call(this)||this;f.strategy=b.strategy;return f}Bd(a,d);a.prototype.logEvent=function(b,f){return Cd(this,void 0,void 0,function(){var c,e;return Dd(this,function(h){od.some(function(g){return g===b})?c=aa["basebe.Clicks.6"]:b===
r.IMPRESSION&&(c=aa["basebe.Impressions.8"]);if(!c)throw Error('unable to determine nexus schema id for eventType "'.concat(b,'"!'));f=Object.assign(Va({},kc(this.strategy,c)),f);lc(c,f)||this.strategy.log('invalid attributes logged to schemaId "'.concat(c,'" for event "').concat(b,'"'),"WARN");e=pd[c];this.strategy.logNexusEvent(f,e,c,{ssd:!0});return[2]})})};return a}(Fb),Fd=function(){function d(a,b){var f=F["default"].cardRoot.ownerDocument.defaultView;if(!f)throw Error("Unable to get window");
this.observer=new f.IntersectionObserver(a,b)}d.prototype.disconnect=function(){this.observer.disconnect()};d.prototype.observe=function(a){a=sa.unscope(a);if(!a)throw Error("Failed to unscope element");this.observer.observe(a)};d.prototype.takeRecords=function(){return this.observer.takeRecords()};d.prototype.unobserve=function(a){a=sa.unscope(a);if(!a)throw Error("Failed to unscope element");this.observer.unobserve(a)};Object.defineProperty(d.prototype,"root",{get:function(){return this.observer.root},
enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"rootMargin",{get:function(){return this.observer.rootMargin},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"thresholds",{get:function(){return this.observer.thresholds},enumerable:!1,configurable:!0});return d}(),Ba=function(d){function a(b){var f,c,e=d.call(this)||this;e._define=null!==(f=null===b||void 0===b?void 0:b.defineBrowserOperations)&&void 0!==f?f:za.setup().define;e._useScopedDom=null!==(c=null===b||
void 0===b?void 0:b.useScopedDom)&&void 0!==c?c:!0;e.metricsManager=e.initializeMetrics(null===b||void 0===b?void 0:b.options);return e}w.__extends(a,d);a.prototype.setOperationProxy=function(b){this.remoteOperationProxy=b};Object.defineProperty(a.prototype,"operationProxy",{get:function(){return this.remoteOperationProxy},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"_dom",{get:function(){return this._useScopedDom?wa["default"]:F["default"]},enumerable:!1,configurable:!0});a.prototype.addEventListener=
function(b,f,c){return this._define(b,f,c)};a.prototype.createElement=function(b){return this._dom.createElement(b)};a.prototype.getElement=function(b,f){f=null!==f&&void 0!==f?f:this._dom.cardRoot;b=b?f.querySelector(b):f;return b instanceof HTMLElement?b:void 0};a.prototype.getElements=function(b,f){return Array.from((null!==f&&void 0!==f?f:this._dom.cardRoot).querySelectorAll(b))};a.prototype.log=function(b,f,c){return Xa.log(b,f,null!==c&&void 0!==c?c:"DARE_CARDS")};a.prototype.matchMedia=function(b){return this.getWindow().matchMedia(b)};
a.prototype.getWindow=function(){var b,f,c=null===(b=this._dom.cardRoot.ownerDocument)||void 0===b?void 0:b.defaultView;c||(c=null===(f=F["default"].cardRoot.ownerDocument)||void 0===f?void 0:f.defaultView);if(!c)throw Error("unable to get window");return c};a.prototype.getDocument=function(){var b=this._useScopedDom?F["default"].cardRoot.ownerDocument:this._dom.cardRoot.ownerDocument;if(!b)throw Error("unable to get document");return b};a.prototype.createIntersectionObserver=function(b,f){return this._useScopedDom?
new Fd(b,f):new (this.getWindow().IntersectionObserver)(b,f)};a.prototype.pageMarker=function(b){var f=this;return new Promise(function(c,e){switch(b){case "load":Ca["default"].pageLoad.then(c).catch(e);break;case "ready":Ca["default"].pageReady.then(c).catch(e);break;default:f.log('unsupported Cards pageMarker "'.concat(b,'", using AUI!'),"WARN");try{P.when(b).execute(c)}catch(h){e(h instanceof Error?h:'unable to call P.when("'.concat(b,'")!'))}}})};a.prototype.logNexusEvent=function(b,f,c,e){return na["default"].event(b,
f,c,e)};a.prototype.logCount=function(b,f,c){return na["default"].count(b,f,c)};a.prototype.initializeMetrics=function(b){var f,c=this.getElement('[data-attributelevel="CAMPAIGN"]');c=(null!==(f=null===c||void 0===c?void 0:c.dataset)&&void 0!==f?f:{}).program;f=void 0===c?"":c;switch(f){case "VIDEO":return new Gb(w.__assign({strategy:this},b));case "CLASSIC":return new Ed({strategy:this});default:this.log('unsupported program "'.concat(f,'", not initializing metrics!'),"WARN")}};return a}(qd),qc=
{"basebe.carousel.1":"base-be"},sc=function(d){function a(b){var f,c,e,h,g=d.call(this,b)||this;g.campaignId=b.campaignId;g.market=b.market;g.operations=b.operations;g.slot=b.slot;try{g.logger=pc("basebe.carousel.1")}catch(m){b.strategy.log(m instanceof Error?m:"unable to initialize desktop lifestyle carousel logger","ERROR")}g.logEvent({event:"impression"});null===(f=g._pausePlayButton)||void 0===f?void 0:f.addEventListener("click",function(){g.logEvent({event:"pausePlayClick",slideIndex:g._activeIndex})});
null===(c=g._nextButton)||void 0===c?void 0:c.addEventListener("click",function(){g.logEvent({event:"nextClick",slideIndex:g._activeIndex})});null===(e=g._previousButton)||void 0===e?void 0:e.addEventListener("click",function(){g.logEvent({event:"previousClick",slideIndex:g._activeIndex})});g._items.forEach(function(m,k){m=g._strategy.getElement("a",m);null===m||void 0===m?void 0:m.addEventListener("click",function(){g.logEvent({event:"imageClick",slideIndex:k})})});null===(h=g._indicators)||void 0===
h?void 0:h.forEach(function(m){m=g._strategy.getElement('[data-dare="CarouselIndicatorInternal"]',m);null===m||void 0===m?void 0:m.addEventListener("animationend",function(){return w.__awaiter(g,void 0,void 0,function(){var k,l,n,p,t,q;return w.__generator(this,function(v){switch(v.label){case 0:if(k=!(null===(t=this._items[this._activeIndex].firstElementChild)||void 0===t?0:t.hasAttribute("data-ajaxdata")))return[3,2];l=null===(q=this._items[this._activeIndex])||void 0===q?void 0:q.firstElementChild;
n=(null===l||void 0===l?void 0:l.getAttribute("data-ajaxtreatment"))||"C";p=(null===l||void 0===l?void 0:l.getAttribute("data-ajaxdata"))||"{}";return l instanceof HTMLElement&&l.hasAttribute("data-ajaxdata")&&"T4"===n?[4,this.hydrateImage(l,p)]:[3,2];case 1:v.sent(),v.label=2;case 2:return this.logEvent({event:"autorotate",slideIndex:this._activeIndex}),[2]}})})})});g._strategy.createIntersectionObserver(function(m){return m.forEach(function(k){k.isIntersecting?(g.play(),g.visibleTimeStart||(g.visibleTimeStart=
Date.now())):(g.pause(),g.visibleTimeStart&&(k=Date.now()-g.visibleTimeStart,g.visibleTimeStart=void 0,g.logEvent({event:"view",slideIndex:g._activeIndex,supplemental:{duration:"".concat(k)}})))})},{threshold:.5}).observe(g._root);g._ajaxLoadContent(g.hydrateImage.bind(g)).catch(function(m){g._strategy.log("Error AJAX loading images: "+m,"ERROR")});return g}w.__extends(a,d);a.prototype.hydrateImage=function(b,f){return w.__awaiter(this,void 0,void 0,function(){var c,e,h,g,m,k;return w.__generator(this,
function(l){switch(l.label){case 0:l.trys.push([0,4,,5]);c=JSON.parse(f);l=c&&"object"===typeof c?Object.hasOwnProperty.call(c,"lifestyleImage")?!0:!1:!1;if(!l)return[3,2];h=sa.unscope;return[4,null===(k=this.operations)||void 0===k?void 0:k.getCarouselImageContent(c)];case 1:return e=h.apply(void 0,[l.sent()]),(g=b.parentElement)&&e?(g.replaceChild(e,b),this._strategy.logCount("DesktopCarouselAJAXLoadSuccess")):(this._strategy.log("Desktop Sparkle Carousel AJAX Load Missing MediaComponentTemplate or InteractiveContainer",
"ERROR"),this._strategy.logCount("DesktopCarouselAJAXLoadFailure_MissingComponent")),[2,Promise.resolve()];case 2:return this._strategy.log("Desktop Sparkle CarouseAJAX Load Missing MediaComponent or InteractiveContainer","ERROR"),this._strategy.logCount("DesktopCarouselAJAXLoadFailure_MissingTemplateData"),[2,Promise.resolve()];case 3:return[3,5];case 4:return m=l.sent(),this._strategy.log("ERROR AJAX loading <MediaComponent />: "+m,"ERROR"),this._strategy.logCount("DesktopCarouselAJAXLoadFailure"),
[2,Promise.reject(m)];case 5:return[2]}})})};a.prototype.logEvent=function(b){var f,c,e=Object.assign({experiment:"ADPT_SB_SPARKLE_DESKTOP_CAROUSEL_1228520"},null!==(f=b.supplemental)&&void 0!==f?f:{});null===(c=this.logger)||void 0===c?void 0:c.call(this,{event:b.event,slideIndex:b.slideIndex,supplemental:JSON.stringify(e),campaignId:this.campaignId,market:this.market,slot:this.slot})};return a}(fb),Gd=function(d){var a,b,f=null===(b=null===(a=F["default"].cardRoot.ownerDocument.defaultView)||void 0===
a?void 0:a.matchMedia("(prefers-reduced-motion: reduce)"))||void 0===b?void 0:b.matches;if(d&&!f){var c=0,e=function(){if(4===d.readyState)return d.play().catch(function(h){Ga("autoPlayVideo failed to play video: "+h,"WARN",void 0)});if(50<=c)Ga("autoPlayVideo failed to play video after max retries","WARN",void 0);else return c++,setTimeout(function(){return e()},50)};return e()}};Wa._operationNames=["generateEnergyEfficiencyModalContent","getCarouselImageContent"];Wa.card=function(){return w.__awaiter(void 0,
void 0,void 0,function(){return w.__generator(this,function(d){nd({enableAdFeedback:Ec,loadAdFeedback:!0,onLoad:function(){U.log("DareLifestyleOnLoad");var a=new Ba,b=Ib.setup(["generateEnergyEfficiencyModalContent"]);oc({operations:b,strategy:a});Gd(Bb('video[data-id="liveImage"]'));Hc(Bb('[data-id="main-container"]'));var f=!!y("[data-ajaxdata]"),c=function(){return rc({strategy:a,operations:f?b:void 0})};switch(f?"C":"T1"){case "C":c();break;case "T1":P.when("af").execute(c);break;case "T2":Ya.pageReady().then(c)}},
onInit:function(){try{P.when("af").execute(function(){return U.log("DareLifestyleAF")})}catch(a){U.log("DareLifestyleAFError")}},isMobile:!1})();return[2]})})}});
